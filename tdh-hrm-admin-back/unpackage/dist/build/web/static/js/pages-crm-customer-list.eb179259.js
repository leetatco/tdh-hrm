(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-crm-customer-list"],{"0acd":function(e,t,i){"use strict";i.r(t);var a=i("cde5"),r=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=r.a},5303:function(e,t,i){var a=i("bbf0");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=i("967d").default;r("a42d316a",a,!0,{sourceMap:!1,shadowMode:!1})},"624f":function(e,t,i){"use strict";var a=i("5303"),r=i.n(a);r.a},6386:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"page-body"},[i("vk-data-table-query",{ref:"queryForm1",attrs:{columns:e.queryForm1.columns},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)},reset:function(t){arguments[0]=t=e.$handleEvent(t),e.resetForm.apply(void 0,arguments)}},model:{value:e.queryForm1.formData,callback:function(t){e.$set(e.queryForm1,"formData",t)},expression:"queryForm1.formData"}}),i("v-uni-view",[i("el-row",[e.$hasRole("admin")||e.$hasPermission("client-info-add")?i("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addBtn.apply(void 0,arguments)}}},[e._v("添加")]):e._e(),e.$hasRole("admin")||e.$hasPermission("client-info-export")?i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit-outline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.exportExcelAll.apply(void 0,arguments)}}},[e._v(" 导出全部 ")]):e._e()],1)],1),i("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,"right-btns":e.table1.rightBtns,selection:!0,"row-no":!1,pagination:!0},on:{update:function(t){arguments[0]=t=e.$handleEvent(t),e.updateBtn.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}}),i("vk-data-dialog",{attrs:{title:e.form1.props.title,width:"900px",mode:"form","close-on-click-modal":!1},model:{value:e.form1.props.show,callback:function(t){e.$set(e.form1.props,"show",t)},expression:"form1.props.show"}},[i("vk-data-form",{ref:"form1",attrs:{rules:e.form1.props.rules,action:e.form1.props.action,"form-type":e.form1.props.formType,columns:e.form1.props.columns,"label-width":"150px",inline:!0,columnsNumber:2,border:!0},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.form1.props.show=!1,e.refresh()}},model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)],1)},r=[]},bbf0:function(e,t,i){var a=i("c86c");t=a(!1),t.push([e.i,"",""]),e.exports=t},c668:function(e,t,i){"use strict";i.r(t);var a=i("6386"),r=i("0acd");for(var n in r)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(n);i("624f");var l=i("828b"),o=Object(l["a"])(r["default"],a["b"],a["c"],!1,null,"18b2f082",null,!1,a["a"],void 0);t["default"]=o.exports},cde5:function(e,t,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(i("2634")),n=a(i("3471")),l=a(i("2fdc"));i("5c47"),i("af8f"),i("d4b5");i("3ae2");var o=uni.vk,s={},y={data:function(){var e=this;return{fileList:[],loading:!1,data:{},table1:{action:"admin/crm/customer/sys/getList",rightBtns:[{mode:"detail_auto",title:"详细",show:function(t){return e.$hasRole("admin")||e.$hasPermission("client-info-view")}},{mode:"update",title:"编辑",show:function(t){return e.$hasRole("admin")||e.$hasPermission("client-info-edit")}},{mode:"delete",title:"删除",show:function(t){return e.$hasRole("admin")||e.$hasPermission("client-info-delete")}}],columns:[{key:"companyName",title:"企业名称",type:"text",fixed:!0,width:200},{key:"industry",title:"所属行业",type:"text",width:150},{key:"establishmentDate",title:"成立时间",type:"date",dateType:"date",valueFormat:"yyyy-MM-dd",width:150},{key:"registeredCapital",title:"注册资本",type:"number",width:150,formatter:function(e){return e?e+"万元":""}},{key:"paidInCapital",title:"实收资本",type:"number",width:150,formatter:function(e){return e?e+"万元":""}},{key:"companyAddress",title:"公司地址",type:"text",width:200},{key:"contactName",title:"对接人",type:"text",width:150},{key:"contactPhone",title:"对接人电话",type:"text",width:150},{key:"contactPosition",title:"对接人职务",type:"text",width:150},{key:"basicAccountBank",title:"基本户银行",type:"text",width:200},{key:"employeeCount",title:"员工总数",type:"number",width:150},{key:"monthlyPayroll",title:"月代发工资额",type:"number",width:150,formatter:function(e){return e?e+"万元":""}},{key:"updateTime",title:"更新时间",type:"time",width:200,show:["detail"]}],multipleSelection:[],selectItem:""},queryForm1:{formData:{},columns:[{key:"companyName",title:"企业名称",type:"text",width:200,mode:"%%"},{key:"industry",title:"所属行业",type:"text",width:150,mode:"%%"},{key:"establishmentDate",title:"成立时间",type:"daterange",dateType:"date",valueFormat:"yyyy-MM-dd",width:200,mode:"[]"},{key:"companyAddress",title:"公司地址",type:"text",width:200,mode:"%%"},{key:"basicAccountBank",title:"基本户银行",type:"text",width:200,mode:"%%"}]},form1:{data:{},props:{action:"",columns:[{key:"companyName",title:"企业名称",type:"text",width:200},{key:"industry",title:"所属行业",type:"text",width:200},{key:"establishmentDate",title:"成立时间",type:"date",dateType:"date",valueFormat:"yyyy-MM-dd",width:200},{key:"registeredCapital",title:"注册资本(万元)",type:"number",precision:2,width:200},{key:"paidInCapital",title:"实收资本(万元)",type:"number",precision:2,width:200},{key:"companyAddress",title:"公司地址",type:"textarea",maxlength:"200",showWordLimit:!0,width:200,autosize:{minRows:2,maxRows:4}},{key:"contactName",title:"对接人姓名",type:"text",width:200},{key:"contactPhone",title:"对接人电话",type:"text",width:200},{key:"contactPosition",title:"对接人职务",type:"text",width:200},{key:"taxpayerType",title:"纳税人类型",type:"select",filterable:!0,clearable:!0,multiple:!0,data:[{value:"一般纳税人",label:"一般纳税人"},{value:"小微企业",label:"小微企业"},{value:"个体户",label:"个体户"}]},{key:"enterpriseNature",title:"企业性质",type:"select",filterable:!0,clearable:!0,multiple:!0,data:[{value:"内资企业",label:"内资企业"},{value:"台资企业",label:"台资企业"},{value:"港资企业",label:"港资企业"},{value:"中外合资",label:"中外合资"},{value:"外资企业",label:"外资企业"}]},{key:"listingType",title:"上市类型",type:"select",filterable:!0,clearable:!0,multiple:!0,data:[{value:"未上市",label:"未上市"},{value:"国内主板上市公司",label:"国内主板上市公司"},{value:"港板",label:"港板"},{value:"新三板",label:"新三板"},{value:"其它",label:"其它"}]},{key:"listingBoard",title:"上市板块",type:"text",width:200,placeholder:"如：创业板、科创板等"},{key:"enterpriseQualifications",title:"企业资质",type:"select",filterable:!0,clearable:!0,multiple:!0,data:[{value:"国高认证",label:"国高认证"},{value:"专精新认证",label:"专精新认证"},{value:"科小认证",label:"科小认证"}]},{key:"basicAccountBank",title:"基本户银行",type:"text",width:200,placeholder:"请输入基本户银行"},{key:"employeeCount",title:"员工总数",type:"number",width:200,placeholder:"请输入员工总数"},{key:"monthlyPayroll",title:"月代发工资额(万元)",type:"number",precision:2,width:200,placeholder:"请输入月代发工资额"},{key:"seniorCertified",title:"高级认证人数",type:"number",width:200},{key:"intermediateCertified",title:"中级认证人数",type:"number",width:200},{key:"masterDegree",title:"硕士人数",type:"number",width:200},{key:"doctorDegree",title:"博士及以上人数",type:"number",width:200},{key:"legalRepresentative",title:"法人",type:"text",width:200},{key:"actualController",title:"实际控制人",type:"text",width:200},{key:"generalManager",title:"总经理",type:"text",width:200},{key:"coreStaff",title:"核心人员(逗号分隔)",type:"textarea",width:630,placeholder:"请输入核心人员姓名，多个用逗号分隔",autosize:{minRows:2,maxRows:4}},{key:"companyIntroduction",title:"公司介绍",type:"textarea",maxlength:"500",showWordLimit:!0,width:630,autosize:{minRows:4,maxRows:10}},{key:"shareholderInfo",title:"股东情况(每行一个)",type:"textarea",width:630,placeholder:"格式：股东名称,应出资金额(万),实际出资金额(万),持股比例(%)",autosize:{minRows:4,maxRows:10}},{key:"shareholderRelationships",title:"股东关系说明",type:"textarea",maxlength:"200",showWordLimit:!0,width:630,autosize:{minRows:3,maxRows:6}},{key:"controllerShareholding",title:"实控人持股比例(%)",type:"number",precision:2,width:200},{key:"softwareCopyrights",title:"软件著作权数量",type:"number",width:200},{key:"trademarksTotal",title:"商标总数",type:"number",width:200},{key:"trademarksBrandCount",title:"其中品牌数",type:"number",width:200},{key:"specialTechnologies",title:"专项技术",type:"textarea",maxlength:"200",showWordLimit:!0,width:630,autosize:{minRows:2,maxRows:4}},{key:"inventionAuthorized",title:"发明授权数量",type:"number",width:200},{key:"utilityModel",title:"实用新型数量",type:"number",width:200},{key:"appearanceDesign",title:"外观设计数量",type:"number",width:200},{key:"inventionPublished",title:"发明公布数量",type:"number",width:200},{key:"rdInvestment",title:"研发投入介绍",type:"textarea",maxlength:"200",showWordLimit:!0,width:630,autosize:{minRows:3,maxRows:6}},{key:"rdPersonnelCount",title:"研发人数",type:"number",width:200}],rules:{companyName:[{required:!0,message:"企业名称不能为空",trigger:["blur","change"]}],industry:[{required:!0,message:"所属行业不能为空",trigger:["blur","change"]}],establishmentDate:[{required:!0,message:"成立时间不能为空",trigger:["blur","change"]}],registeredCapital:[{required:!0,message:"注册资本不能为空",trigger:["blur","change"]}],companyAddress:[{required:!0,message:"公司地址不能为空",trigger:["blur","change"]}],contactName:[{required:!0,message:"对接人姓名不能为空",trigger:["blur","change"]}],contactPhone:[{required:!0,message:"对接人电话不能为空",trigger:["blur","change"]},{validator:o.pubfn.validator("mobile"),message:"电话格式错误",trigger:"blur"}],basicAccountBank:[{required:!0,message:"基本户银行不能为空",trigger:["blur","change"]}],employeeCount:[{required:!0,message:"员工总数不能为空",trigger:["blur","change"]}],legalRepresentative:[{required:!0,message:"法人不能为空",trigger:["blur","change"]}],actualController:[{required:!0,message:"实际控制人不能为空",trigger:["blur","change"]}]},formType:"",title:"",show:!1}},formDatas:{}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o=this.vk,this.options=e,this.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},beforeDestroy:function(){this.handleFileClick&&document.removeEventListener("click",this.handleFileClick)},methods:{init:function(e){s["form1"]=o.pubfn.copyObject(this.form1)},pageTo:function(e){o.navigateTo(e)},resetForm:function(){o.pubfn.resetForm(s,this)},search:function(){this.$refs.table1.search()},refresh:function(){this.$refs.table1.refresh()},getCurrentRow:function(){return this.$refs.table1.getCurrentRow()},currentChange:function(e){this.table1.selectItem=e},selectionChange:function(e){this.table1.multipleSelection=e},addBtn:function(){this.resetForm(),this.form1.props.action="admin/crm/customer/sys/add",this.form1.props.formType="add",this.form1.props.title="添加客户资料",this.form1.props.show=!0},updateBtn:function(e){var t=e.item;this.form1.props.action="admin/crm/customer/sys/update",this.form1.props.formType="update",this.form1.props.title="编辑客户资料",this.form1.props.show=!0,this.form1.data=t},deleteBtn:function(e){var t=e.item,i=e.deleteFn;i({action:"admin/crm/customer/sys/delete",data:{_id:t._id}})},batchBtn:function(e){switch(e){case 1:o.toast("批量操作按钮1");break;case 2:o.toast("批量操作按钮2");break;default:break}},handleChange:function(e){var t=this,i=0,a="";try{this.$iexcel.importExcel(e.raw,{companyName:{title:"企业名称",type:"text"},industry:{title:"所属行业",type:"text"},establishmentDate:{title:"成立时间",type:"date"},registeredCapital:{title:"注册资本",type:"number"},paidInCapital:{title:"实收资本",type:"number"},companyAddress:{title:"公司地址",type:"text"},contactName:{title:"对接人姓名",type:"text"},contactPhone:{title:"对接人电话",type:"text"},contactPosition:{title:"对接人职务",type:"text"},basicAccountBank:{title:"基本户银行",type:"text"},employeeCount:{title:"员工总数",type:"number"},monthlyPayroll:{title:"月代发工资额",type:"number"},seniorCertified:{title:"高级认证人数",type:"number"},intermediateCertified:{title:"中级认证人数",type:"number"},masterDegree:{title:"硕士人数",type:"number"},doctorDegree:{title:"博士及以上人数",type:"number"},legalRepresentative:{title:"法人",type:"text"},actualController:{title:"实际控制人",type:"text"},generalManager:{title:"总经理",type:"text"},companyIntroduction:{title:"公司介绍",type:"text"},controllerShareholding:{title:"实控人持股比例",type:"number"},softwareCopyrights:{title:"软件著作权",type:"number"},trademarksTotal:{title:"商标总数",type:"number"},trademarksBrandCount:{title:"品牌数",type:"number"},inventionAuthorized:{title:"发明授权",type:"number"},utilityModel:{title:"实用新型",type:"number"},rdPersonnelCount:{title:"研发人数",type:"number"}},function(){var e=(0,l.default)((0,r.default)().mark((function e(l){var s,y,d,c,u;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=(0,n.default)(l),e.prev=1,s.s();case 3:if((y=s.n()).done){e.next=21;break}if(d=y.value,d.companyName){e.next=8;break}return o.alert("企业名称不能为空"),e.abrupt("break",21);case 8:return c=t.processImportData(d),e.next=11,o.callFunction({url:"admin/crm/customer/sys/add",title:"请求中...",data:c});case 11:if(u=e.sent,0!=u.code){e.next=16;break}i++,e.next=19;break;case 16:return i=0,a=JSON.stringify(d),e.abrupt("break",21);case 19:e.next=3;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](1),s.e(e.t0);case 26:return e.prev=26,s.f(),e.finish(26);case 29:t.fileList=[],0==i?o.alert("错误数据:".concat(a),"导入Excel失败","确定",(function(){})):o.alert("导入数据:".concat(i,"条"),"导入Excel成功","确定",(function(){t.refresh()}));case 31:case"end":return e.stop()}}),e,null,[[1,23,26,29]])})));return function(t){return e.apply(this,arguments)}}())}catch(s){console.log(s)}},processImportData:function(e){var t={};return t.companyName=e.companyName,t.industry=e.industry,t.establishmentDate=e.establishmentDate,t.registeredCapital=e.registeredCapital,t.paidInCapital=e.paidInCapital,t.companyAddress=e.companyAddress,t.basicAccountBank=e.basicAccountBank,t.employeeCount=e.employeeCount,t.monthlyPayroll=e.monthlyPayroll,t.companyIntroduction=e.companyIntroduction,t.controllerShareholding=e.controllerShareholding,t.contactName=e.contactName,t.contactPhone=e.contactPhone,t.contactPosition=e.contactPosition,t.seniorCertified=e.seniorCertified||0,t.intermediateCertified=e.intermediateCertified||0,t.masterDegree=e.masterDegree||0,t.doctorDegree=e.doctorDegree||0,t.legalRepresentative=e.legalRepresentative,t.actualController=e.actualController,t.generalManager=e.generalManager,t.softwareCopyrights=e.softwareCopyrights||0,t.trademarksTotal=e.trademarksTotal||0,t.trademarksBrandCount=e.trademarksBrandCount||0,t.inventionAuthorized=e.inventionAuthorized||0,t.utilityModel=e.utilityModel||0,t.appearanceDesign=0,t.inventionPublished=0,t.rdPersonnelCount=e.rdPersonnelCount||0,t.rdInvestment="",t.taxpayerType=[],t.enterpriseNature=[],t.listingType="未上市",t.listingBoard="",t.enterpriseQualifications=[],t.coreStaff="",t.shareholderInfo="",t.shareholderRelationships="",t.specialTechnologies="",t},exportExcelModel:function(){this.$refs.table1.exportExcel({fileName:"客户资料信息汇总表模版",title:"正在导出模版...",columns:[{key:"companyName",title:"企业名称",type:"text"},{key:"industry",title:"所属行业",type:"text"},{key:"establishmentDate",title:"成立时间",type:"date",dateType:"date",valueFormat:"yyyy-MM-dd"},{key:"registeredCapital",title:"注册资本(万元)",type:"number"},{key:"paidInCapital",title:"实收资本(万元)",type:"number"},{key:"companyAddress",title:"公司地址",type:"text"},{key:"contactName",title:"对接人姓名",type:"text"},{key:"contactPhone",title:"对接人电话",type:"text"},{key:"contactPosition",title:"对接人职务",type:"text"},{key:"basicAccountBank",title:"基本户银行",type:"text"},{key:"employeeCount",title:"员工总数",type:"number"},{key:"monthlyPayroll",title:"月代发工资额(万元)",type:"number"},{key:"seniorCertified",title:"高级认证人数",type:"number"},{key:"intermediateCertified",title:"中级认证人数",type:"number"},{key:"masterDegree",title:"硕士人数",type:"number"},{key:"doctorDegree",title:"博士及以上人数",type:"number"},{key:"legalRepresentative",title:"法人",type:"text"},{key:"actualController",title:"实际控制人",type:"text"},{key:"generalManager",title:"总经理",type:"text"},{key:"companyIntroduction",title:"公司介绍",type:"text"},{key:"controllerShareholding",title:"实控人持股比例(%)",type:"number"},{key:"softwareCopyrights",title:"软件著作权",type:"number"},{key:"trademarksTotal",title:"商标总数",type:"number"},{key:"trademarksBrandCount",title:"品牌数",type:"number"},{key:"inventionAuthorized",title:"发明授权",type:"number"},{key:"utilityModel",title:"实用新型",type:"number"},{key:"rdPersonnelCount",title:"研发人数",type:"number"}],pageIndex:1,pageSize:1})},exportExcelAll:function(){this.$refs.table1.exportExcel({fileName:"客户资料信息汇总表",title:"正在导出数据...",columns:[{key:"companyName",title:"企业名称",type:"text"},{key:"industry",title:"所属行业",type:"text"},{key:"establishmentDate",title:"成立时间",type:"date",dateType:"date",valueFormat:"yyyy-MM-dd"},{key:"registeredCapital",title:"注册资本(万元)",type:"number"},{key:"paidInCapital",title:"实收资本(万元)",type:"number"},{key:"companyAddress",title:"公司地址",type:"text"},{key:"contactName",title:"对接人姓名",type:"text"},{key:"contactPhone",title:"对接人电话",type:"text"},{key:"contactPosition",title:"对接人职务",type:"text"},{key:"basicAccountBank",title:"基本户银行",type:"text"},{key:"employeeCount",title:"员工总数",type:"number"},{key:"monthlyPayroll",title:"月代发工资额(万元)",type:"number"},{key:"seniorCertified",title:"高级认证人数",type:"number"},{key:"intermediateCertified",title:"中级认证人数",type:"number"},{key:"masterDegree",title:"硕士人数",type:"number"},{key:"doctorDegree",title:"博士及以上人数",type:"number"},{key:"legalRepresentative",title:"法人",type:"text"},{key:"actualController",title:"实际控制人",type:"text"},{key:"generalManager",title:"总经理",type:"text"},{key:"companyIntroduction",title:"公司介绍",type:"text"},{key:"controllerShareholding",title:"实控人持股比例(%)",type:"number"},{key:"softwareCopyrights",title:"软件著作权",type:"number"},{key:"trademarksTotal",title:"商标总数",type:"number"},{key:"trademarksBrandCount",title:"品牌数",type:"number"},{key:"inventionAuthorized",title:"发明授权",type:"number"},{key:"utilityModel",title:"实用新型",type:"number"},{key:"appearanceDesign",title:"外观设计",type:"number"},{key:"inventionPublished",title:"发明公布",type:"number"},{key:"rdPersonnelCount",title:"研发人数",type:"number"}],pageIndex:1,pageSize:-1})}},watch:{},computed:{}};t.default=y}}]);