(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bpmn-process-route-config-list"],{1086:function(e,t,a){"use strict";a.r(t);var i=a("fb88"),r=a("1987");for(var o in r)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(o);a("9857");var n=a("828b"),s=Object(n["a"])(r["default"],i["b"],i["c"],!1,null,"250c9b30",null,!1,i["a"],void 0);t["default"]=s.exports},1987:function(e,t,a){"use strict";a.r(t);var i=a("6f7f"),r=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a},"6f7f":function(e,t,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a("9b1b")),o=i(a("fcf3")),n=i(a("2634")),s=i(a("2fdc"));a("c223"),a("aa77"),a("bf0f"),a("fd3c"),a("dc8a"),a("d4b5"),a("9db6"),a("9327"),a("aa9c"),a("dd2b"),a("0c26"),a("2797"),a("c9b5"),a("ab80"),a("64aa"),a("5c47"),a("af8f");var l=uni.vk,c={},d={components:{VariableValueInput:{props:["value","placeholder","valueType"],data:function(){return{internalValue:this.value||""}},watch:{value:function(e){this.internalValue=e},internalValue:function(e){this.$emit("input",e)}},methods:{handleInput:function(e){this.internalValue=e}},render:function(e){var t=this;return"expression"===this.valueType?e("el-input",{props:{value:this.internalValue,placeholder:this.placeholder,type:"textarea",rows:3,clearable:!0},on:{input:function(e){return t.handleInput(e)}}}):e("el-input",{props:{value:this.internalValue,placeholder:this.placeholder,clearable:!0},on:{input:function(e){return t.handleInput(e)}}})}}},data:function(){var e=this;return{loading:!1,formLoading:!1,formTypes:[],processDefinitions:[],conditionRules:[],variableMappings:[],table1:{action:"admin/bpmn/process-route-config/sys/getList",rightBtns:[{mode:"detail_auto",title:"详细",show:function(t){return e.$hasRole("admin")||e.$hasPermission("bpmn-workflow-view")}},{mode:"update",title:"编辑",show:function(t){return e.$hasRole("admin")||e.$hasPermission("bpmn-workflow-edit")}},{mode:"delete",title:"删除",show:function(t){return e.$hasRole("admin")||e.$hasPermission("bpmn-workflow-delete")}}],columns:[{key:"name",title:"配置名称",type:"text",width:150,fixed:"left"},{key:"form_type_code",title:"表单类型",type:"text",width:150,render:function(e,t){var a;return(null===(a=t.form_type_info)||void 0===a?void 0:a.name)||e}},{key:"process_definition_key",title:"流程定义",type:"text",width:200,render:function(e,t){var a;return(null===(a=t.process_definition_info)||void 0===a?void 0:a.name)||e}},{key:"condition_rule_code",title:"流程条件",type:"text",width:250,render:function(e,t){var a;return(null===(a=t.condition_rule_info)||void 0===a?void 0:a.name)||(e?"已配置":"无条件")}},{key:"priority",title:"优先级",type:"text",width:100},{key:"fallback",title:"回退配置",type:"text",width:100,render:function(e){return e?'<el-tag size="small" type="warning">是</el-tag>':'<el-tag size="small" type="info">否</el-tag>'}},{key:"status",title:"状态",type:"text",width:100,render:function(e){var t={active:{text:"启用",type:"success"},inactive:{text:"停用",type:"danger"}}[e]||{text:e,type:"info"};return'<el-tag size="small" type="'.concat(t.type,'">').concat(t.text,"</el-tag>")}},{key:"update_date",title:"更新时间",type:"time",width:200}],multipleSelection:[],selectItem:""},queryForm1:{formData:{name:"",form_type_code:"",status:""},columns:[{key:"name",title:"配置名称",type:"text",width:200,mode:"%%"},{key:"form_type_code",title:"表单类型",type:"select",width:200,mode:"=",data:[]},{key:"status",title:"状态",type:"select",width:150,mode:"=",data:[{value:"active",label:"启用"},{value:"inactive",label:"停用"}]}]},form1:{data:{name:"",description:"",form_type_code:"",process_definition_key:"",condition_rule_code:"",priority:1,fallback:!1,config_context:{variables_mapping:{}},status:"active"},props:{action:"",rules:{name:[{required:!0,message:"配置名称不能为空",trigger:["blur","change"]},{max:100,message:"配置名称长度不能超过100个字符",trigger:["blur","change"]}],form_type_code:[{required:!0,message:"表单类型不能为空",trigger:["blur","change"]}],process_definition_key:[{required:!0,message:"流程定义不能为空",trigger:["blur","change"]}],priority:[{required:!0,message:"优先级不能为空",trigger:["blur","change"]},{type:"number",min:1,message:"优先级必须大于0",trigger:["blur","change"]}],status:[{required:!0,message:"状态不能为空",trigger:["blur","change"]}]},formType:"",title:"",show:!1}}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l=this.vk,this.options=e,this.init(e)},methods:{init:function(e){var t=this;return(0,s.default)((0,n.default)().mark((function e(){return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c["form1"]=l.pubfn.copyObject(t.form1),e.next=3,t.loadFormTypes();case 3:return e.next=5,t.loadProcessDefinitions();case 5:return e.next=7,t.loadConditionRules();case 7:case"end":return e.stop()}}),e)})))()},loadFormTypes:function(){var e=this;return(0,s.default)((0,n.default)().mark((function t(){var a,i;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.vk.callFunction({url:"admin/bpmn/process-route-config/pub/getFormTypes"});case 3:a=t.sent,0===a.code&&(e.formTypes=a.rows,i=e.queryForm1.columns.find((function(e){return"form_type_code"===e.key})),i&&(i.data=a.rows.map((function(e){return{value:e._id,label:e.name}})))),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("加载表单类型失败:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},loadProcessDefinitions:function(){var e=this;return(0,s.default)((0,n.default)().mark((function t(){var a;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.vk.callFunction({url:"admin/bpmn/process-route-config/pub/getProcessDefinitions"});case 3:a=t.sent,0===a.code&&(e.processDefinitions=a.rows),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("加载流程定义失败:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},loadConditionRules:function(){var e=this;return(0,s.default)((0,n.default)().mark((function t(){var a;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.vk.callFunction({url:"admin/bpmn/process-route-config/pub/getConditionRules"});case 3:a=t.sent,0===a.code&&(e.conditionRules=a.rows),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("加载条件规则失败:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},initVariableMapping:function(){var e,t=(null===(e=this.form1.data.config_context)||void 0===e?void 0:e.variables_mapping)||{};this.variableMappings=Object.keys(t).map((function(e){var a=t[e],i="",r="constant";if(null===a||void 0===a)i="",r="constant";else if("object"===(0,o.default)(a))try{i=JSON.stringify(a,null,2),r="expression"}catch(n){console.error("JSON stringify error:",n),i=String(a),r="constant"}else i=String(a),r="string"===typeof i&&i.startsWith&&i.startsWith("${")&&i.endsWith("}")?"variable":"constant";return{key:e,value:i,value_type:r}}))},addVariableMapping:function(){this.variableMappings.push({key:"",value:"",value_type:"constant"}),this.updateVariablesMapping()},removeVariableMapping:function(e){this.variableMappings.splice(e,1),this.updateVariablesMapping()},onVariableTypeChange:function(e){"expression"===e.value_type&&(e.value&&""!==e.value.trim()||(e.value="{\n  \n}")),this.updateVariablesMapping()},updateVariablesMapping:function(){var e=this,t={};this.variableMappings.forEach((function(a){if(a.key&&""!==a.key.trim()&&void 0!==a.value&&null!==a.value){var i=a.value;if("expression"===a.value_type)try{i=""!==a.value.trim()?JSON.parse(a.value):{}}catch(r){console.warn("JSON parse failed, keeping as string:",r),i=a.value}else i="variable"===a.value_type?a.value:e.convertToAppropriateType(a.value);t[a.key]=i}})),this.form1.data.config_context.variables_mapping=t},convertToAppropriateType:function(e){if(null===e||void 0===e||""===e)return e;if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("undefined"!==e){if(!isNaN(e)&&""!==e.toString().trim()){var t=Number(e);if(!isNaN(t))return t}return e}},getVariableValueComponent:function(e){return"VariableValueInput"},getVariableValuePlaceholder:function(e){switch(e.value_type){case"variable":return"输入变量名，如：${applicant.department}";case"expression":return'输入JSON表达式，如：{"type": "function", "name": "getSupervisor"}';default:return"输入常量值"}},getVariableTypeDescription:function(e){return{constant:"固定值，直接参与条件比较",variable:"引用流程变量，运行时动态获取值",expression:"JSON表达式，支持复杂数据结构"}[e]||""},pageTo:function(e){l.navigateTo(e)},resetForm:function(){this.form1.data=l.pubfn.copyObject(c["form1"].data),this.variableMappings=[],this.$refs.formRef&&this.$refs.formRef.clearValidate()},search:function(){this.$refs.table1.search()},refresh:function(){this.$refs.table1.refresh()},getCurrentRow:function(){return this.$refs.table1.getCurrentRow()},currentChange:function(e){this.table1.selectItem=e},selectionChange:function(e){this.table1.multipleSelection=e},addBtn:function(){this.resetForm(),this.form1.props.action="admin/bpmn/process-route-config/sys/add",this.form1.props.formType="add",this.form1.props.title="添加路由配置",this.form1.props.show=!0},updateBtn:function(e){var t=e.item;this.form1.props.action="admin/bpmn/process-route-config/sys/update",this.form1.props.formType="update",this.form1.props.title="编辑路由配置",this.form1.props.show=!0,this.form1.data=l.pubfn.copyObject(t),this.form1.data.config_context||(this.form1.data.config_context={variables_mapping:{}}),this.initVariableMapping()},deleteBtn:function(e){var t=this,a=e.item;this.$confirm("确定删除该路由配置吗？","提示",{type:"warning"}).then((0,s.default)((0,n.default)().mark((function e(){var i;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.vk.callFunction({url:"admin/bpmn/process-route-config/sys/delete",data:{_id:a._id}});case 3:i=e.sent,0===i.code?(t.$message.success("删除成功"),t.refresh()):t.$message.error(i.msg||"删除失败"),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("删除失败:",e.t0),t.$message.error("删除失败");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).catch((function(){}))},submitForm:function(){var e=this;return(0,s.default)((0,n.default)().mark((function t(){var a;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.formRef){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$refs.formRef.validate();case 5:return e.updateVariablesMapping(),e.formLoading=!0,t.next=9,e.vk.callFunction({url:e.form1.props.action,data:(0,r.default)((0,r.default)({},e.form1.data),{},{_id:e.form1.data._id})});case 9:a=t.sent,0===a.code?(e.$message.success("add"===e.form1.props.formType?"添加成功":"更新成功"),e.form1.props.show=!1,e.refresh()):e.$message.error(a.msg||"操作失败"),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),console.error("表单验证失败:",t.t0);case 16:return t.prev=16,e.formLoading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[2,13,16,19]])})))()}}};t.default=d},"7f43":function(e,t,a){var i=a("c86c");t=i(!1),t.push([e.i,".page-body[data-v-250c9b30]{padding:%?20?%;background:#f5f7fa;min-height:100vh}.button-group[data-v-250c9b30]{margin-bottom:%?20?%;padding:%?20?% %?24?%;background:#fff;border-radius:%?8?%;-webkit-box-shadow:0 %?2?% %?6?% rgba(0,0,0,.05);box-shadow:0 %?2?% %?6?% rgba(0,0,0,.05);border:%?1?% solid #ebeef5}[data-v-250c9b30] .route-config-dialog .el-dialog__body{padding:0}.dialog-content[data-v-250c9b30]{padding:24px;max-height:70vh;overflow-y:auto}.route-form .form-section[data-v-250c9b30]{margin-bottom:24px;border-radius:8px;border:1px solid #e4e7ed}.route-form .form-section[data-v-250c9b30]:last-child{margin-bottom:0}.route-form .form-section[data-v-250c9b30]  .el-card__header{padding:16px 20px;background:#f8f9fa;border-bottom:1px solid #e4e7ed}.route-form .section-header[data-v-250c9b30]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.route-form .section-title[data-v-250c9b30]{font-size:16px;font-weight:600;color:#303133}.route-form .form-tip[data-v-250c9b30]{font-size:12px;color:#909399;margin-top:4px}.option-item .option-name[data-v-250c9b30]{font-size:14px;color:#303133}.option-item .option-code[data-v-250c9b30],\n.option-item .option-key[data-v-250c9b30],\n.option-item .option-desc[data-v-250c9b30]{font-size:12px;color:#909399;margin-top:2px}.option-item .option-desc[data-v-250c9b30]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.variables-container .variable-item[data-v-250c9b30]{margin-bottom:16px;padding:16px;background:#f8f9fa;border-radius:6px;border:1px solid #e4e7ed}.variables-container .variable-item[data-v-250c9b30]:last-child{margin-bottom:0}.variables-container .variable-row[data-v-250c9b30]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:8px}.variables-container .variable-type-selector[data-v-250c9b30]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:8px;padding-top:8px;border-top:1px dashed #e4e7ed}.variables-container .variable-type-tip[data-v-250c9b30]{font-size:12px;color:#909399;-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px}.variables-container .variables-empty[data-v-250c9b30]{padding:20px 0;text-align:center}.dialog-footer[data-v-250c9b30]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #e4e7ed;background:#fafafa}[data-v-250c9b30] .vk-data-table .el-table{border-radius:8px;overflow:hidden;-webkit-box-shadow:0 %?2?% %?6?% rgba(0,0,0,.05);box-shadow:0 %?2?% %?6?% rgba(0,0,0,.05)}[data-v-250c9b30] .vk-data-table .el-table__header th{background-color:#f5f7fa;color:#606266;font-weight:600}@media (max-width:768px){.dialog-content[data-v-250c9b30]{padding:16px}.route-form .form-section[data-v-250c9b30]{margin-bottom:16px}.variable-item[data-v-250c9b30]{padding:12px}.variable-row[data-v-250c9b30]{-ms-flex-wrap:wrap;flex-wrap:wrap}.variable-row .el-col[data-v-250c9b30]{margin-bottom:8px}.variable-type-selector[data-v-250c9b30]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.variable-type-tip[data-v-250c9b30]{margin-left:0;margin-top:4px}}",""]),e.exports=t},8955:function(e,t,a){var i=a("7f43");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=a("967d").default;r("0a8874ea",i,!0,{sourceMap:!1,shadowMode:!1})},9857:function(e,t,a){"use strict";var i=a("8955"),r=a.n(i);r.a},fb88:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page-body"},[a("vk-data-table-query",{attrs:{columns:e.queryForm1.columns},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)}},model:{value:e.queryForm1.formData,callback:function(t){e.$set(e.queryForm1,"formData",t)},expression:"queryForm1.formData"}}),a("v-uni-view",{staticClass:"button-group"},[a("el-row",[e.$hasRole("admin")||e.$hasPermission("bpmn-workflow-add")?a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addBtn.apply(void 0,arguments)}}},[e._v("添加路由配置")]):e._e(),a("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-refresh"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.refresh.apply(void 0,arguments)}}},[e._v("刷新")])],1)],1),a("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,"right-btns":e.table1.rightBtns,selection:!0,"row-no":!1,pagination:!0},on:{update:function(t){arguments[0]=t=e.$handleEvent(t),e.updateBtn.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}}),a("vk-data-dialog",{attrs:{title:e.form1.props.title,width:"900px",mode:"form","close-on-click-modal":!1,"custom-class":"route-config-dialog"},scopedSlots:e._u([{key:"footer",fn:function(){return[a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.form1.props.show=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",loading:e.formLoading,size:"medium"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitForm.apply(void 0,arguments)}}},[e._v("确定")])],1)]},proxy:!0}]),model:{value:e.form1.props.show,callback:function(t){e.$set(e.form1.props,"show",t)},expression:"form1.props.show"}},[a("div",{staticClass:"dialog-content"},[a("el-form",{ref:"formRef",staticClass:"route-form",attrs:{model:e.form1.data,rules:e.form1.props.rules,"label-width":"130px"}},[a("el-card",{staticClass:"form-section",attrs:{shadow:"never"}},[a("div",{staticClass:"section-header",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"section-title"},[e._v("基础信息")])]),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"配置名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入路由配置名称",maxlength:"100","show-word-limit":!0},model:{value:e.form1.data.name,callback:function(t){e.$set(e.form1.data,"name",t)},expression:"form1.data.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:999,"controls-position":"right"},model:{value:e.form1.data.priority,callback:function(t){e.$set(e.form1.data,"priority",t)},expression:"form1.data.priority"}}),a("div",{staticClass:"form-tip"},[e._v("数字越小优先级越高")])],1)],1)],1),a("el-form-item",{attrs:{label:"配置描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入配置描述",rows:3,maxlength:"500","show-word-limit":!0},model:{value:e.form1.data.description,callback:function(t){e.$set(e.form1.data,"description",t)},expression:"form1.data.description"}})],1)],1),a("el-card",{staticClass:"form-section",attrs:{shadow:"never"}},[a("div",{staticClass:"section-header",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"section-title"},[e._v("路由规则配置")])]),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"表单类型",prop:"form_type_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择表单类型",filterable:!0},model:{value:e.form1.data.form_type_code,callback:function(t){e.$set(e.form1.data,"form_type_code",t)},expression:"form1.data.form_type_code"}},e._l(e.formTypes,(function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}},[a("div",{staticClass:"option-item"},[a("div",{staticClass:"option-name"},[e._v(e._s(t.name))]),a("div",{staticClass:"option-code"},[e._v(e._s(t.code))])])])})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"流程定义",prop:"process_definition_key"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程定义",filterable:!0},model:{value:e.form1.data.process_definition_key,callback:function(t){e.$set(e.form1.data,"process_definition_key",t)},expression:"form1.data.process_definition_key"}},e._l(e.processDefinitions,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}},[a("div",{staticClass:"option-item"},[a("div",{staticClass:"option-name"},[e._v(e._s(t.name))]),a("div",{staticClass:"option-key"},[e._v(e._s(t.key))])])])})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"条件规则"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择条件规则（可选）",clearable:!0,filterable:!0},model:{value:e.form1.data.condition_rule_code,callback:function(t){e.$set(e.form1.data,"condition_rule_code",t)},expression:"form1.data.condition_rule_code"}},e._l(e.conditionRules,(function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}},[a("div",{staticClass:"option-item"},[a("div",{staticClass:"option-name"},[e._v(e._s(t.name))]),a("div",{staticClass:"option-code"},[e._v(e._s(t.code))]),a("div",{staticClass:"option-desc"},[e._v(e._s(t.description))])])])})),1),a("div",{staticClass:"form-tip"},[e._v("不选择条件规则表示无条件匹配")])],1),a("el-form-item",[a("el-checkbox",{model:{value:e.form1.data.fallback,callback:function(t){e.$set(e.form1.data,"fallback",t)},expression:"form1.data.fallback"}},[e._v(" 设为回退配置 ")]),a("div",{staticClass:"form-tip"},[e._v("回退配置在无其他配置匹配时使用")])],1)],1),a("el-card",{staticClass:"form-section",attrs:{shadow:"never"}},[a("div",{staticClass:"section-header",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"section-title"},[e._v("变量映射配置")]),a("el-button",{attrs:{type:"text",icon:"el-icon-plus",size:"small"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addVariableMapping.apply(void 0,arguments)}}},[e._v(" 添加变量 ")])],1),a("div",{staticClass:"variables-container"},[e._l(e.variableMappings,(function(t,i){return a("div",{key:i,staticClass:"variable-item"},[a("el-row",{staticClass:"variable-row",attrs:{gutter:12}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"变量名",size:"small"},model:{value:t.key,callback:function(a){e.$set(t,"key",a)},expression:"variable.key"}})],1),a("el-col",{attrs:{span:14}},[a(e.getVariableValueComponent(t),{tag:"component",staticStyle:{width:"100%"},attrs:{placeholder:e.getVariableValuePlaceholder(t),size:"small"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"variable.value"}})],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:!0,size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.removeVariableMapping(i)}}})],1)],1),a("div",{staticClass:"variable-type-selector"},[a("el-radio-group",{attrs:{size:"mini"},on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.onVariableTypeChange(t)}},model:{value:t.value_type,callback:function(a){e.$set(t,"value_type",a)},expression:"variable.value_type"}},[a("el-radio-button",{attrs:{label:"constant"}},[e._v("常量")]),a("el-radio-button",{attrs:{label:"variable"}},[e._v("变量")]),a("el-radio-button",{attrs:{label:"expression"}},[e._v("表达式")])],1),a("div",{staticClass:"variable-type-tip"},[e._v(" "+e._s(e.getVariableTypeDescription(t.value_type))+" ")])],1)],1)})),0===e.variableMappings.length?a("div",{staticClass:"variables-empty"},[a("el-empty",{attrs:{description:"暂无变量配置","image-size":60}})],1):e._e()],2)]),a("el-card",{staticClass:"form-section",attrs:{shadow:"never"}},[a("div",{staticClass:"section-header",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"section-title"},[e._v("状态设置")])]),a("el-form-item",{attrs:{label:"配置状态",prop:"status"}},[a("el-radio-group",{model:{value:e.form1.data.status,callback:function(t){e.$set(e.form1.data,"status",t)},expression:"form1.data.status"}},[a("el-radio",{attrs:{label:"active"}},[e._v("启用")]),a("el-radio",{attrs:{label:"inactive"}},[e._v("停用")])],1)],1)],1)],1)],1)])],1)},r=[]}}]);