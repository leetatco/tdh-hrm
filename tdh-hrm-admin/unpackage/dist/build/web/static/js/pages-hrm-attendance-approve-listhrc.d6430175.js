(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-hrm-attendance-approve-listhrc"],{"0530":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page-body"},[n("vk-data-table-query",{attrs:{columns:e.queryForm1.columns},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)}},model:{value:e.queryForm1.formData,callback:function(t){e.$set(e.queryForm1,"formData",t)},expression:"queryForm1.formData"}}),n("v-uni-view",[n("el-row",[e.$hasRole("admin")||e.$hasPermission("hrm-attendance-export")?n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit-outline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.exportExcelAll.apply(void 0,arguments)}}},[e._v(" 导出全部 ")]):e._e(),e.table1.multipleSelection&&e.$hasRole("admin")?n("el-dropdown",{attrs:{"split-button":!1,trigger:"click"},on:{command:function(t){arguments[0]=t=e.$handleEvent(t),e.batchBtn.apply(void 0,arguments)}}},[n("el-button",{staticStyle:{"margin-left":"20rpx"},attrs:{type:"danger",size:"small",disabled:0===e.table1.multipleSelection.length}},[e._v(" 批量审核"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:2}},[e._v("未通过")])],1)],1):e._e()],1)],1),n("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,"right-btns":e.table1.rightBtns,"data-preprocess":e.table1.dataPreprocess,selection:!0,"row-no":!1,pagination:!0},on:{update:function(t){arguments[0]=t=e.$handleEvent(t),e.updateBtn.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}}),n("vk-data-dialog",{attrs:{title:e.form1.props.title,width:"700px",mode:"form","close-on-click-modal":!1},model:{value:e.form1.props.show,callback:function(t){e.$set(e.form1.props,"show",t)},expression:"form1.props.show"}},[n("vk-data-form",{attrs:{rules:e.form1.props.rules,action:e.form1.props.action,"form-type":e.form1.props.formType,columns:e.form1.props.columns,"label-width":"100px",inline:!0,columnsNumber:2},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.form1.props.show=!1,e.refresh()}},scopedSlots:e._u([{key:"share_cost",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.share_cost))])],1)]}},{key:"clothes_cost",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.clothes_cost))])],1)]}},{key:"reward_cost",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.reward_cost))])],1)]}},{key:"punish_cost",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.punish_cost))])],1)]}},{key:"agency_fee",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.agency_fee))])],1)]}},{key:"other_cost",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.other_cost))])],1)]}},{key:"marriage_leave",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.marriage_leave))])],1)]}},{key:"maternity_leave",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.maternity_leave))])],1)]}},{key:"paternity_leave",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.paternity_leave))])],1)]}},{key:"work_injury",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.work_injury))])],1)]}},{key:"sick_leave",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.sick_leave))])],1)]}},{key:"emergency_leave",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.emergency_leave))])],1)]}},{key:"allowance",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.allowance))])],1)]}},{key:"attendance_correction",fn:function(t){var r=t.form;return[n("v-uni-view",[n("v-uni-text",[e._v(e._s(r.attendance_correction))])],1)]}}]),model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)],1)},a=[]},"0729":function(e,t,n){"use strict";n.r(t);var r=n("0530"),a=n("3e10");for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("b9e0");var o=n("828b"),s=Object(o["a"])(a["default"],r["b"],r["c"],!1,null,"2c5052d3",null,!1,r["a"],void 0);t["default"]=s.exports},"3e10":function(e,t,n){"use strict";n.r(t);var r=n("8239"),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},"73de":function(e,t,n){var r=n("c86c");t=r(!1),t.push([e.i,"",""]),e.exports=t},8239:function(e,t,n){"use strict";n("6a54");var r=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("3471")),i=r(n("2634")),o=r(n("2fdc"));n("c223"),n("5c47"),n("af8f"),n("d4b5");var s=uni.vk,l={},c=new Date(s.pubfn.getOffsetTime(new Date,{mode:"before"})).getFullYear(),u=new Date(s.pubfn.getOffsetTime(new Date,{mode:"before"})).getMonth(),d=u>9?u:"0".concat(u),y=s.myfn.normalizeMonth("".concat(c,"-").concat(d)),m={data:function(){var e=this;return{nowym:"",loading:!1,data:{},table1:{action:"admin/hrm/attendance/sys/approve/getList",rightBtns:[{mode:"detail_auto",title:"详细",show:function(t){return e.$hasRole("admin")||e.$hasPermission("hrm-attendance-view")}},{mode:"update",title:"编辑",show:function(t){return e.$hasRole("admin")||e.$hasPermission("hrm-attendance-edit")}},{mode:"delete",title:"删除",show:function(t){return e.$hasRole("admin")||e.$hasPermission("hrm-attendance-delete")}}],dataPreprocess:function(e){return e},columns:[{key:"attendance_ym",title:"考勤日期",type:"date",dateType:"date",valueFormat:"yyyy-MM",format:"yyyy-MM",fixed:!0,width:100},{key:"employee_id",title:"员工工号",type:"text",fixed:!0,width:100},{key:"employees.employee_name",title:"员工姓名",type:"text",fixed:!0,width:100},{key:"employees.card",title:"身份证号码",type:"text",fixed:!0,width:170},{key:"employees.departments.department_name",title:"部门",type:"text",fixed:!0,width:200,formatter:function(e,t,n,r){return s.pubfn.isNotNull(t.resign_month)&&y.split("-")[1]!=t.resign_month?t.resign_month+e:e}},{key:"employees.positions.position_name",title:"职位",type:"text",width:100},{key:"employees.hire_date",title:"入职日期",type:"date",dateType:"date",valueFormat:"yyyy-MM-dd",format:"yyyy-MM-dd",width:100},{key:"resign_month",title:"离职日期",type:"number",width:110,formatter:function(e,t,n,r){return e?e+"月离职工资":""}},{key:"work_days",title:"全勤天数",type:"number",width:100},{key:"real_days",title:"实际天数",type:"number",width:100},{key:"overtime_hours",title:"加班小时",type:"number",width:100},{key:"overtime_cost",title:"加班费",type:"number",width:100},{key:"earlytime_hours",title:"迟/早退(分)",type:"number",width:100},{key:"earlytime_cost",title:"迟到费",type:"number",width:100},{key:"missed_count",title:"未打卡(次)",type:"number",width:100},{key:"missed_cost",title:"未打卡费",type:"number",width:100},{key:"share_cost",title:"水电费用",type:"number",width:100},{key:"clothes_cost",title:"工衣费用",type:"number",width:100},{key:"reward_cost",title:"奖励",type:"number",width:100},{key:"punish_cost",title:"惩罚",type:"number",width:100},{key:"agency_fee",title:"介绍费",type:"number",width:100},{key:"other_cost",title:"其它费用",type:"number",width:100},{key:"marriage_leave",title:"婚假",type:"number",width:100},{key:"maternity_leave",title:"产假",type:"number",width:100},{key:"paternity_leave",title:"陪产假",type:"number",width:100},{key:"sick_leave",title:"病假",type:"number",width:100},{key:"emergency_leave",title:"丧假",type:"number",width:100},{key:"work_injury",title:"工伤",type:"number",width:100},{key:"allowance",title:"补助",type:"number",width:100},{key:"attendance_correction",title:"补考勤",type:"number",width:100},{key:"enable_hr",title:"考勤审核",type:"switch",activeValue:!0,inactiveValue:!1,width:100,watch:function(t){var n=t.value,r=t.row;t.change;s.callFunction({url:"admin/hrm/attendance/sys/approve/update",title:n?"通过中...":"未通过中...",data:{_id:r._id,attendance_ym_key:r.attendance_ym_key,employee_id:r.employee_id,enable_hr:n},success:function(t){e.refresh()}})}},{key:"comment",title:"备注",type:"text",show:["detail"],width:300},{key:"update_date",title:"更新时间",type:"time",width:200,show:["detail"]},{key:"users.nickname",title:"更新人",type:"text",width:200,show:["detail"]}],multipleSelection:[],selectItem:""},queryForm1:{formData:{attendance_ym:y,enable_hr:!0},columns:[{key:"attendance_ym",title:"考勤日期",type:"date",dateType:"date",valueFormat:"yyyy-MM",format:"yyyy-MM",width:200},{key:"enable_hr",title:"考勤审核",type:"select",width:200,hidden:!0,data:[{value:!0,label:"已通过"},{value:!1,label:"未通过"}],mode:"="},{key:"employee_id",title:"",type:"table-select",placeholder:"选择员工",action:"admin/hrm/employees/sys/getList",multiple:!1,columns:[{key:"employee_id",title:"员工工号",type:"text",idKey:!0},{key:"employee_name",title:"员工姓名",type:"text",nameKey:!0},{key:"card",title:"身份证号码",type:"text",nameKey:!0}],queryColumns:[{key:"employee_id",title:"员工工号",type:"text",width:150,mode:"%%"},{key:"employee_name",title:"员工姓名",type:"text",width:150,mode:"%%"},{key:"card",title:"身份证号码",type:"text",width:150,mode:"%%"}]}]},form1:{data:{enable_hr:!1,enable_fd:!1},props:{action:"",columns:[{key:"attendance_ym",title:"考勤日期",type:"date",dateType:"date",valueFormat:"yyyy-MM",format:"yyyy-MM",width:200},{key:"employee_id",title:"",type:"table-select",placeholder:"选择员工",action:"admin/hrm/employees/sys/getList",multiple:!1,columns:[{key:"employee_id",title:"员工工号",type:"text",idKey:!0},{key:"employee_name",title:"员工姓名",type:"text",nameKey:!0},{key:"card",title:"身份证号码",type:"text",nameKey:!0}],queryColumns:[{key:"employee_id",title:"员工工号",type:"text",width:150,mode:"%%"},{key:"employee_name",title:"员工姓名",type:"text",width:150,mode:"%%"},{key:"card",title:"身份证号码",type:"text",width:150,mode:"%%"}]},{key:"resign_month",title:"离职日期",type:"number",disabled:!0,width:200},{key:"work_days",title:"全勤天数",type:"number",width:200},{key:"real_days",title:"实际天数",type:"number",width:200},{key:"overtime_hours",title:"加班小时",type:"number",precision:1,width:200},{key:"overtime_cost",title:"加班费",type:"number",disabled:!0,precision:0,width:200},{key:"earlytime_hours",title:"迟/早退(分)",type:"number",precision:0,width:200},{key:"earlytime_cost",title:"迟到费",disabled:!0,type:"number",precision:0,width:200},{key:"missed_count",title:"未打卡(次)",type:"number",precision:0,width:200},{key:"missed_cost",title:"未打卡费",type:"number",disabled:!0,precision:0,width:200},{key:"share_cost",title:"水电费用",type:"number",disabled:!0,precision:0,width:200},{key:"clothes_cost",title:"工衣费用",type:"number",disabled:!0,precision:0,width:200},{key:"reward_cost",title:"奖励",type:"number",disabled:!0,precision:0,width:200},{key:"punish_cost",title:"惩罚",type:"number",disabled:!0,precision:0,width:200},{key:"agency_fee",title:"介绍费",type:"number",disabled:!0,precision:0,width:100},{key:"other_cost",title:"其它费用",type:"number",disabled:!0,precision:0,width:200},{key:"marriage_leave",title:"婚假",type:"number",disabled:!0,precision:0,width:100},{key:"maternity_leave",title:"产假",type:"number",disabled:!0,precision:0,width:100},{key:"paternity_leave",title:"陪产假",type:"number",disabled:!0,precision:0,width:100},{key:"sick_leave",title:"病假",type:"number",disabled:!0,precision:0,width:100},{key:"emergency_leave",title:"丧假",type:"number",disabled:!0,precision:0,width:100},{key:"work_injury",title:"工伤",type:"number",disabled:!0,precision:0,width:100},{key:"allowance",title:"补助",type:"number",disabled:!0,precision:0,width:100},{key:"attendance_correction",title:"补考勤",type:"number",disabled:!0,precision:0,width:100},{key:"enable_hr",title:"考勤审核",type:"switch",width:200},{key:"comment",title:"备注",type:"textarea",maxlength:"99",showWordLimit:!0,width:200,autosize:{minRows:2,maxRows:10}}],rules:{attendance_ym:[{required:!0,message:"该项不能为空",trigger:["change"]}],employee_id:[{required:!0,message:"该项不能为空",trigger:["change"]}],work_days:[{required:!0,message:"该项不能为空",trigger:["change"]}],real_days:[{required:!0,message:"该项不能为空",trigger:["change"]}],overtime_hours:[{validator:function(){var t=(0,o.default)((0,i.default)().mark((function t(n,r,a){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r>0&&e.computCost();case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),trigger:["change"]}],earlytime_hours:[{validator:function(){var t=(0,o.default)((0,i.default)().mark((function t(n,r,a){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r>0&&e.computCost();case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),trigger:["change"]}],missed_count:[{validator:function(){var t=(0,o.default)((0,i.default)().mark((function t(n,r,a){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r>0&&e.computCost();case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),trigger:["change"]}]},formType:"",title:"",show:!1}},formDatas:{}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s=this.vk,this.options=e,this.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{exportExcelAll:function(){this.$refs.table1.exportExcel({fileName:y+"员工考勤信息",title:"正在导出数据...",columns:[{key:"attendance_ym",title:"考勤日期",type:"date",dateType:"date",valueFormat:"yyyy-MM",format:"yyyy-MM"},{key:"employee_id",title:"员工工号",type:"text"},{key:"employees.employee_name",title:"员工姓名",type:"text"},{key:"employees.card",title:"身份证号码",type:"text"},{key:"employees.departments.department_name",title:"部门",type:"text",formatter:function(e,t,n,r){return s.pubfn.isNotNull(t.resign_month)&&y.split("-")[1]!=t.resign_month?t.resign_month+e:e}},{key:"employees.positions.position_name",title:"职位",type:"text"},{key:"employees.hire_date",title:"入职日期",type:"date",dateType:"date",valueFormat:"yyyy-MM-dd",format:"yyyy-MM-dd"},{key:"resign_month",title:"离职日期",type:"number",formatter:function(e,t,n,r){return e?e+"月离职工资":""}},{key:"work_days",title:"全勤天数",type:"number"},{key:"real_days",title:"实际天数",type:"number"},{key:"overtime_hours",title:"加班小时",type:"number"},{key:"overtime_cost",title:"加班费",type:"number"},{key:"earlytime_hours",title:"迟/早退(分)",type:"number"},{key:"earlytime_cost",title:"迟到费",type:"number"},{key:"missed_count",title:"未打卡(次)",type:"number"},{key:"missed_cost",title:"未打卡费",type:"number"},{key:"share_cost",title:"水电费用",type:"number"},{key:"clothes_cost",title:"工衣费用",type:"number"},{key:"reward_cost",title:"奖励",type:"number"},{key:"punish_cost",title:"惩罚",type:"number"},{key:"agency_fee",title:"介绍费",type:"number"},{key:"other_cost",title:"其它费用",type:"number"},{key:"marriage_leave",title:"婚假",type:"number"},{key:"maternity_leave",title:"产假",type:"number"},{key:"paternity_leave",title:"陪产假",type:"number"},{key:"sick_leave",title:"病假",type:"number"},{key:"emergency_leave",title:"丧假",type:"number"},{key:"work_injury",title:"工伤",type:"number"},{key:"allowance",title:"补助",type:"number"},{key:"attendance_correction",title:"补考勤",type:"number"},{key:"enable_hr",title:"考勤审核",type:"text",formatter:function(e,t,n,r){return e?"通过":"未通过"}},{key:"comment",title:"备注",type:"text"}],pageIndex:1,pageSize:-1})},init:function(e){l["form1"]=s.pubfn.copyObject(this.form1)},pageTo:function(e){s.navigateTo(e)},resetForm:function(){s.pubfn.resetForm(l,this)},search:function(){this.$refs.table1.search()},refresh:function(){this.$refs.table1.refresh()},getCurrentRow:function(){return this.$refs.table1.getCurrentRow()},currentChange:function(e){this.table1.selectItem=e},selectionChange:function(e){this.table1.multipleSelection=e},computCost:function(){var e=this;return(0,o.default)((0,i.default)().mark((function t(){var n,r,a,o,l,c,u,d,y,m,p;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.callFunction({url:"admin/hrm/salary/sys/lateclock/getList",title:"请求中...",data:{}});case 2:return n=t.sent,t.next=5,s.callFunction({url:"admin/hrm/salary/sys/overtime/getList",title:"请求中...",data:{employee_id:"common"}});case 5:if(r=t.sent,0!=n.total){t.next=8;break}return t.abrupt("return",s.alert("请设定迟/早退打卡规则！"));case 8:if(0!=r.total){t.next=10;break}return t.abrupt("return",s.alert("请设通用加班规则！"));case 10:if(a=e.form1.data.employee_id||0,o=e.form1.data.overtime_hours||0,l=e.form1.data.earlytime_hours||0,c=e.form1.data.missed_count||0,0!=a){t.next=16;break}return t.abrupt("return",s.alert("请选择员工！"));case 16:if(0===o){t.next=21;break}return t.next=19,s.callFunction({url:"admin/hrm/salary/sys/overtime/getList",title:"请求中...",data:{employee_id:a}});case 19:u=t.sent,u.total>0?(d=o*u.rows[0].overtime_cost,e.$set(e.form1.data,"overtime_cost",d)):(y=o*(r.rows[0].overtime_cost||20),e.$set(e.form1.data,"overtime_cost",y));case 21:m=(l-n.rows[0].late_min)*n.rows[0].late_price,m>0?e.$set(e.form1.data,"earlytime_cost",m):e.$set(e.form1.data,"earlytime_cost",0),p=(c-n.rows[0].clock_min)*n.rows[0].clock_price,p>0?e.$set(e.form1.data,"missed_cost",p):e.$set(e.form1.data,"missed_cost",0);case 25:case"end":return t.stop()}}),t)})))()},autoBtn:function(){var e=this;return(0,o.default)((0,i.default)().mark((function t(){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:s.confirm("确定将删除".concat(y,"月全部数据，重新生成考勤表数据！"),"提示","确定","取消",function(){var t=(0,o.default)((0,i.default)().mark((function t(n){var r,o,l,u,d,m,p,_,h,f;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.confirm){t.next=61;break}return t.next=3,s.callFunction({url:"admin/hrm/attendance/sys/getList",title:"请求中...",data:{attendance_ym:y}});case 3:if(r=t.sent,0!=r.total){t.next=6;break}return t.abrupt("return",s.alert("没有".concat(y,"月考勤明细！")));case 6:o=0,l="",u=(0,a.default)(r.rows),t.prev=9,u.s();case 11:if((d=u.n()).done){t.next=52;break}return m=d.value,s.pubfn.isNotNull(m.resign_month)?(p=m.resign_month>9?m.resign_month:"0".concat(m.resign_month),m.attendance_ym_key="".concat(c,"-").concat(p)):m.attendance_ym_key=m.attendance_ym,t.next=16,s.callFunction({url:"admin/hrm/salary/sys/we/getSumList",title:"请求中...",data:{employee_id:m.employee_id,attendance_ym_key:m.attendance_ym_key}});case 16:return _=t.sent,_.total>0?m.share_cost=_.rows[0].share_cost||"":m.share_cost="",t.next=20,s.callFunction({url:"admin/hrm/salary/sys/clothes/getList",title:"请求中...",data:{employee_id:m.employee_id,attendance_ym_key:m.attendance_ym_key}});case 20:return _=t.sent,_.total>0?m.clothes_cost=_.rows[0].clothes_cost||"":m.clothes_cost="",t.next=24,s.callFunction({url:"admin/hrm/salary/sys/cost/getList",title:"请求中...",data:{employee_id:m.employee_id,attendance_ym_key:m.attendance_ym_key}});case 24:return _=t.sent,_.total>0?(m.reward_cost=_.rows[0].reward_cost||"",m.punish_cost=_.rows[0].punish_cost||"",m.agency_fee=_.rows[0].agency_fee||"",m.other_cost=_.rows[0].other_cost||"",m.marriage_leave=_.rows[0].marriage_leave||"",m.maternity_leave=_.rows[0].maternity_leave||"",m.paternity_leave=_.rows[0].paternity_leave||"",m.work_injury=_.rows[0].work_injury||"",m.sick_leave=_.rows[0].sick_leave||"",m.emergency_leave=_.rows[0].emergency_leave||"",m.allowance=_.rows[0].allowance||"",m.attendance_correction=_.rows[0].attendance_correction||""):(m.reward_cost="",m.punish_cost="",m.agency_fee="",m.other_cost="",m.marriage_leave="",m.maternity_leave="",m.paternity_leave="",m.work_injury="",m.sick_leave="",m.emergency_leave="",m.allowance="",m.attendance_correction=""),e.form1.data.employee_id=m.employee_id,e.form1.data.overtime_hours=m.overtime_hours,e.form1.data.earlytime_hours=m.earlytime_hours,e.form1.data.missed_count=m.missed_count,t.next=32,e.computCost();case 32:return m.overtime_cost=e.form1.data.overtime_cost,m.earlytime_cost=e.form1.data.earlytime_cost,m.missed_cost=e.form1.data.missed_cost,t.next=37,s.callFunction({url:"admin/hrm/attendance/sys/approve/delete",title:"请求中...",data:{employee_id:m.employee_id,attendance_ym_key:m.attendance_ym_key}});case 37:if(h=t.sent,0!=h.code){t.next=50;break}return m.enable_hr=!1,t.next=42,s.callFunction({url:"admin/hrm/attendance/sys/approve/add",title:"请求中...",data:m});case 42:if(f=t.sent,0!=f.code){t.next=47;break}o++,t.next=50;break;case 47:return o=0,l=JSON.stringify(m),t.abrupt("break",52);case 50:t.next=11;break;case 52:t.next=57;break;case 54:t.prev=54,t.t0=t["catch"](9),u.e(t.t0);case 57:return t.prev=57,u.f(),t.finish(57);case 60:0==o?s.alert("错误数据:".concat(l),"新增失败","确定",(function(){})):s.alert("导入数据:".concat(o,"条"),"新增成功","确定",(function(){e.refresh()}));case 61:case"end":return t.stop()}}),t,null,[[9,54,57,60]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},addBtn:function(){this.resetForm(),this.form1.props.action="admin/hrm/attendance/sys/approve/add",this.form1.props.formType="add",this.form1.props.title="添加",this.form1.props.show=!0},updateBtn:function(e){var t=e.item;this.form1.props.action="admin/hrm/attendance/sys/approve/update",this.form1.props.formType="update",this.form1.props.title="编辑",this.form1.props.show=!0,this.form1.data=t},deleteBtn:function(e){var t=e.item,n=e.deleteFn;n({action:"admin/hrm/attendance/sys/approve/delete",data:{_id:t._id}})},batchBtn:function(e){var t=this;return(0,o.default)((0,i.default)().mark((function n(){return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:n.t0=e,n.next=1===n.t0?3:2===n.t0?8:13;break;case 3:return n.next=5,s.callFunction({url:"admin/hrm/attendance/sys/all/updateAll",title:"请求中...",data:{items:t.table1.multipleSelection,enable_hr:!0}});case 5:return n.sent,t.refresh(),n.abrupt("break",14);case 8:return n.next=10,s.callFunction({url:"admin/hrm/attendance/sys/all/updateAll",title:"请求中...",data:{items:t.table1.multipleSelection,enable_hr:!1}});case 10:return n.sent,t.refresh(),n.abrupt("break",14);case 13:return n.abrupt("break",14);case 14:case"end":return n.stop()}}),n)})))()}},watch:{},computed:{}};t.default=m},b9e0:function(e,t,n){"use strict";var r=n("ba68"),a=n.n(r);a.a},ba68:function(e,t,n){var r=n("73de");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("967d").default;a("57bec230",r,!0,{sourceMap:!1,shadowMode:!1})}}]);