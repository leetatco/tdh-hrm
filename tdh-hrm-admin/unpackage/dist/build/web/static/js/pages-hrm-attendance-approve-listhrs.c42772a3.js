(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-hrm-attendance-approve-listhrs"],{"4a7d":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page-body"},[a("vk-data-table-query",{attrs:{columns:e.queryForm1.columns},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)}},model:{value:e.queryForm1.formData,callback:function(t){e.$set(e.queryForm1,"formData",t)},expression:"queryForm1.formData"}}),a("v-uni-view",[a("el-row",[e.$hasRole("admin")||e.$hasPermission("hrm-attendance-add")?a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.autoBtn.apply(void 0,arguments)}}},[e._v("自动生成月考勤表")]):e._e(),e.$hasRole("admin")||e.$hasPermission("hrm-attendance-export")?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit-outline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.exportExcelAll.apply(void 0,arguments)}}},[e._v(" 导出全部 ")]):e._e(),e.table1.multipleSelection&&(e.$hasRole("admin")||e.$hasPermission("hrm-attendance-add"))?a("el-dropdown",{attrs:{"split-button":!1,trigger:"click"},on:{command:function(t){arguments[0]=t=e.$handleEvent(t),e.batchBtn.apply(void 0,arguments)}}},[a("el-button",{staticStyle:{"margin-left":"20rpx"},attrs:{type:"danger",size:"small",disabled:0===e.table1.multipleSelection.length}},[e._v(" 批量审核"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:1}},[e._v("通过")])],1)],1):e._e()],1)],1),a("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,"right-btns":e.table1.rightBtns,"data-preprocess":e.table1.dataPreprocess,selection:!0,"row-no":!1,pagination:!0},on:{update:function(t){arguments[0]=t=e.$handleEvent(t),e.updateBtn.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}}),a("vk-data-dialog",{attrs:{title:e.form1.props.title,width:"700px",mode:"form","close-on-click-modal":!1},model:{value:e.form1.props.show,callback:function(t){e.$set(e.form1.props,"show",t)},expression:"form1.props.show"}},[a("vk-data-form",{attrs:{rules:e.form1.props.rules,action:e.form1.props.action,"form-type":e.form1.props.formType,columns:e.form1.props.columns,"label-width":"100px",inline:!0,columnsNumber:2},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.form1.props.show=!1,e.refresh()}},model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)],1)},r=[]},7048:function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("9b1b")),o=n(a("3471")),i=n(a("2634")),s=n(a("2fdc"));a("c223"),a("5c47"),a("af8f"),a("bf0f"),a("f3f7"),a("18f7"),a("de6c"),a("08eb"),a("aa9c"),a("c1a3"),a("f7a5"),a("2797"),a("7a76"),a("c9b5");var c=uni.vk,l={},d=new Date(c.pubfn.getOffsetTime(new Date,{mode:"before"})).getFullYear(),u=new Date(c.pubfn.getOffsetTime(new Date,{mode:"before"})).getMonth(),m=u>9?u:"0".concat(u),p=c.myfn.normalizeMonth("".concat(d,"-").concat(m)),y={data:function(){var e=this;return{nowym:"",loading:!1,data:{},table1:{action:"admin/hrm/attendance/sys/approve/getList",rightBtns:[{mode:"detail_auto",title:"详细",show:function(t){return e.$hasRole("admin")||e.$hasPermission("hrm-attendance-view")}},{mode:"update",title:"编辑",show:function(t){return e.$hasRole("admin")||e.$hasPermission("hrm-attendance-edit")}},{mode:"delete",title:"删除",show:function(t){return e.$hasRole("admin")||e.$hasPermission("hrm-attendance-delete")}}],dataPreprocess:function(e){return e},columns:[{key:"attendance_ym",title:"考勤日期",type:"date",dateType:"date",valueFormat:"yyyy-MM",format:"yyyy-MM",fixed:!0,width:100},{key:"employee_name",title:"姓名",type:"text",fixed:!0,width:100},{key:"card",title:"身份证号码",type:"text",fixed:!0,width:170},{key:"department_name",title:"部门",type:"text",fixed:!0,width:200},{key:"position_name",title:"职位",type:"text",width:100},{key:"hire_date",title:"入职日期",type:"date",dateType:"date",valueFormat:"yyyy-MM-dd",format:"yyyy-MM-dd",width:100},{key:"resign_date",title:"离职日期",type:"text",width:110},{key:"work_days",title:"全勤天数",type:"number",width:100},{key:"real_days",title:"实际天数",type:"number",width:100},{key:"typhoon_duty",title:"台风",type:"text",width:100},{key:"spring_festival_duty",title:"留年",type:"text",width:100},{key:"overtime_hours",title:"加班小时",type:"number",width:100},{key:"earlytime_hours",title:"迟/早退(分)",type:"number",width:100},{key:"earlytime_cost",title:"迟到费",type:"number",width:100},{key:"missed_count",title:"未打卡(次)",type:"number",width:100},{key:"missed_cost",title:"未打卡费",type:"number",width:100},{key:"user_confirmed",title:"本人确认",type:"text",width:100},{key:"enable_hr",title:"考勤审核",type:"switch",activeValue:!0,inactiveValue:!1,width:100,watch:function(t){var a=t.value,n=t.row;t.change;c.callFunction({url:"admin/hrm/attendance/sys/approve/update",title:a?"通过中...":"未通过中...",data:{_id:n._id,attendance_ym:n.attendance_ym,card:n.card,department_name:n.department_name,enable_hr:a},success:function(t){e.refresh()}})}},{key:"comment",title:"备注",type:"text",show:["detail"],width:300},{key:"update_date",title:"更新时间",type:"time",width:200,show:["detail"]},{key:"users.nickname",title:"更新人",type:"text",width:200,show:["detail"]}],multipleSelection:[],selectItem:""},queryForm1:{formData:{attendance_ym:p,enable_hr:!1},columns:[{key:"attendance_ym",title:"考勤日期",type:"date",dateType:"date",valueFormat:"yyyy-MM",format:"yyyy-MM",width:200},{key:"enable_hr",title:"考勤审核",type:"select",width:200,hidden:!0,data:[{value:!0,label:"已通过"},{value:!1,label:"未通过"}],mode:"="},{key:"card",title:"",type:"table-select",placeholder:"选择员工",action:"admin/hrm/attendance/sys/getList",multiple:!1,columns:[{key:"employee_name",title:"员工姓名",type:"text",nameKey:!0},{key:"card",title:"身份证号码",type:"text",idKey:!0}],queryColumns:[{key:"employee_name",title:"员工姓名",type:"text",width:150,mode:"%%"},{key:"card",title:"身份证号码",type:"text",width:150,mode:"%%"}]}]},form1:{data:{enable_hr:!1,enable_fd:!1},props:{action:"",columns:[{key:"attendance_ym",title:"考勤日期",type:"date",dateType:"date",valueFormat:"yyyy-MM",format:"yyyy-MM",width:200},{key:"card",title:"",type:"table-select",placeholder:"选择员工",action:"admin/hrm/attendance/sys/getList",multiple:!1,columns:[{key:"employee_name",title:"员工姓名",type:"text",nameKey:!0},{key:"card",title:"身份证号码",type:"text",idKey:!0}],queryColumns:[{key:"employee_name",title:"员工姓名",type:"text",width:150,mode:"%%"},{key:"card",title:"身份证号码",type:"text",width:150,mode:"%%"}]},{key:"resign_date",title:"离职日期",type:"text",disabled:!0,width:200},{key:"work_days",title:"全勤天数",type:"number",width:200},{key:"real_days",title:"实际天数",type:"text",width:200},{key:"overtime_hours",title:"加班小时",type:"number",precision:1,width:200},{key:"earlytime_hours",title:"迟/早退(分)",type:"number",precision:0,width:200},{key:"earlytime_cost",title:"迟到费",disabled:!0,type:"number",precision:0,width:200},{key:"missed_count",title:"未打卡(次)",type:"number",precision:0,width:200},{key:"missed_cost",title:"未打卡费",type:"number",disabled:!0,precision:0,width:200},{key:"enable_hr",title:"考勤审核",type:"switch",width:200},{key:"comment",title:"备注",type:"textarea",maxlength:"99",showWordLimit:!0,width:200,autosize:{minRows:2,maxRows:10}}],rules:{attendance_ym:[{required:!0,message:"该项不能为空",trigger:["change"]}],employee_id:[{required:!0,message:"该项不能为空",trigger:["change"]}],work_days:[{required:!0,message:"该项不能为空",trigger:["change"]}],real_days:[{required:!0,message:"该项不能为空",trigger:["change"]}],overtime_hours:[{validator:function(){var t=(0,s.default)((0,i.default)().mark((function t(a,n,r){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n>0&&e.computCost();case 1:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),trigger:["change"]}],earlytime_hours:[{validator:function(){var t=(0,s.default)((0,i.default)().mark((function t(a,n,r){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n>0&&e.computCost();case 1:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),trigger:["change"]}],missed_count:[{validator:function(){var t=(0,s.default)((0,i.default)().mark((function t(a,n,r){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n>0&&e.computCost();case 1:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),trigger:["change"]}]},formType:"",title:"",show:!1}},formDatas:{}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c=this.vk,this.options=e,this.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{exportExcelAll:function(){this.$refs.table1.exportExcel({fileName:p+"员工考勤信息",title:"正在导出数据...",columns:[{key:"attendance_ym",title:"考勤日期",type:"date",dateType:"date",valueFormat:"yyyy-MM",format:"yyyy-MM"},{key:"employee_name",title:"员工姓名",type:"text"},{key:"card",title:"身份证号码",type:"text"},{key:"department_name",title:"部门",type:"text"},{key:"position_name",title:"职位",type:"text"},{key:"hire_date",title:"入职日期",type:"date",dateType:"date",valueFormat:"yyyy-MM-dd",format:"yyyy-MM-dd"},{key:"resign_date",title:"离职日期",type:"text"},{key:"work_days",title:"全勤天数",type:"number"},{key:"real_days",title:"实际天数",type:"number"},{key:"typhoon_duty",title:"台风",type:"text"},{key:"spring_festival_duty",title:"留年",type:"text"},{key:"overtime_hours",title:"加班小时",type:"number"},{key:"earlytime_hours",title:"迟/早退(分)",type:"number"},{key:"earlytime_cost",title:"迟到费",type:"number"},{key:"missed_count",title:"未打卡(次)",type:"number"},{key:"missed_cost",title:"未打卡费",type:"number"},{key:"user_confirmed",title:"本人确认",type:"number"},{key:"enable_hr",title:"考勤审核",type:"text",formatter:function(e,t,a,n){return e?"通过":"未通过"}},{key:"comment",title:"备注",type:"text"}],pageIndex:1,pageSize:-1})},init:function(e){l["form1"]=c.pubfn.copyObject(this.form1)},pageTo:function(e){c.navigateTo(e)},resetForm:function(){c.pubfn.resetForm(l,this)},search:function(){this.$refs.table1.search()},refresh:function(){this.$refs.table1.refresh()},getCurrentRow:function(){return this.$refs.table1.getCurrentRow()},currentChange:function(e){this.table1.selectItem=e},selectionChange:function(e){this.table1.multipleSelection=e},computCost:function(){var e=this;return(0,s.default)((0,i.default)().mark((function t(){var a,n,r,o,s,l,d,u;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c.callFunction({url:"admin/hrm/salary/sys/lateclock/getList",title:"请求中...",data:{}});case 2:return a=t.sent,t.next=5,c.callFunction({url:"admin/hrm/salary/sys/overtime/getList",title:"请求中...",data:{employee_id:"common"}});case 5:if(n=t.sent,0!=a.total){t.next=8;break}return t.abrupt("return",c.alert("请设定迟/早退打卡规则！"));case 8:if(0!=n.total){t.next=10;break}return t.abrupt("return",c.alert("请设通用加班规则！"));case 10:r=e.form1.data.overtime_hours||0,o=e.form1.data.earlytime_hours||0,s=e.form1.data.missed_count||0,0!==r&&(l=r*(n.rows[0].overtime_cost||20),e.$set(e.form1.data,"overtime_cost",l)),d=(o-a.rows[0].late_min)*a.rows[0].late_price,d>0?e.$set(e.form1.data,"earlytime_cost",d):e.$set(e.form1.data,"earlytime_cost",0),u=(s-a.rows[0].clock_min)*a.rows[0].clock_price,u>0?e.$set(e.form1.data,"missed_cost",u):e.$set(e.form1.data,"missed_cost",0);case 18:case"end":return t.stop()}}),t)})))()},autoBtn:function(){var e=this;return(0,s.default)((0,i.default)().mark((function t(){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:c.confirm("确定将删除".concat(p,"月全部数据，重新生成考勤表数据！"),"提示","确定","取消",function(){var t=(0,s.default)((0,i.default)().mark((function t(a){var n,r,s,l,d,u,m,y,h,f,_,w;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.confirm){t.next=40;break}return t.prev=1,t.next=4,c.callFunction({url:"admin/hrm/attendance/sys/all/getListAll",title:"请求中...",data:{attendance_ym:p}});case 4:if(n=t.sent,0!=n.total){t.next=7;break}return t.abrupt("return",c.alert("没有".concat(p,"月考勤明细！")));case 7:return t.next=9,c.callFunction({url:"admin/hrm/attendance/sys/all/deleteAproAll",title:"请求中...",data:{attendance_ym:p}});case 9:if(r=t.sent,0==r.code){t.next=12;break}return t.abrupt("return",c.alert("".concat(p,"月考勤明细删除失败！")));case 12:s=[],l=new Set,d=(0,o.default)(n.rows);try{for(d.s();!(u=d.n()).done;)m=u.value,s.push(m.card),m.attendance_ym_key=m.attendance_ym,l.add(m.attendance_ym_key)}catch(i){d.e(i)}finally{d.f()}return c.toast("开始获取费用数据..."),t.next=19,e.batchGetAllCosts(s,Array.from(l));case 19:return y=t.sent,c.toast("获取计算规则..."),t.next=23,e.getComputeRulesWithSpecial(s);case 23:if(h=t.sent,h){t.next=26;break}return t.abrupt("return");case 26:return c.toast("开始处理数据..."),t.next=29,e.processRowDatas(n.rows,y,h);case 29:return f=t.sent,t.next=32,c.callFunction({url:"admin/hrm/attendance/sys/all/addAproAll",title:"请求中...",data:{items:f}});case 32:_=t.sent,0===_.code?(w="新增考勤表完成！成功: ".concat(_.id.length,"条"),c.alert(w,"新增成功","确定",(function(){e.refresh()}))):c.alert("新增失败!","系统错误","确定"),t.next=40;break;case 36:t.prev=36,t.t0=t["catch"](1),console.error("处理过程中发生错误:",t.t0),c.alert("处理过程中发生错误: ".concat(t.t0.message),"系统错误","确定");case 40:case"end":return t.stop()}}),t,null,[[1,36]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},batchGetAllCosts:function(e,t){var a=this;return(0,s.default)((0,i.default)().mark((function n(){var o,s,l,d,u,m,p;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=new Map,e&&0!==e.length&&t&&0!==t.length){n.next=3;break}return n.abrupt("return",o);case 3:s=200,l=Math.ceil(e.length/s),d=0;case 6:if(!(d<e.length)){n.next=26;break}return u=e.slice(d,d+s),m=Math.floor(d/s)+1,c.toast("获取费用数据... (".concat(m,"/").concat(l,")")),n.prev=10,n.next=13,c.callFunction({url:"admin/hrm/attendance/sys/all/getCostAll",title:"获取费用数据中...",data:{card:u,attendance_ym_key:t}});case 13:p=n.sent,0===p.code&&p.data?(p.data.we&&p.data.we.length>0&&p.data.we.forEach((function(e){var t="".concat(e.employee_id,"_").concat(e.attendance_ym),a=o.get(t)||{};o.set(t,(0,r.default)((0,r.default)({},a),{},{share_cost:(a.share_cost||0)+(e.share_cost||0)}))})),p.data.clothes&&p.data.clothes.length>0&&p.data.clothes.forEach((function(e){var t="".concat(e.employee_id,"_").concat(e.attendance_ym),a=o.get(t)||{};o.set(t,(0,r.default)((0,r.default)({},a),{},{clothes_cost:e.clothes_cost||0}))})),p.data.cost&&p.data.cost.length>0&&p.data.cost.forEach((function(e){var t="".concat(e.employee_id,"_").concat(e.attendance_ym),a=o.get(t)||{};o.set(t,(0,r.default)((0,r.default)({},a),{},{reward_cost:e.reward_cost||0,punish_cost:e.punish_cost||0,agency_fee:e.agency_fee||0,other_cost:e.other_cost||0}))}))):console.warn("第".concat(m,"批费用数据获取失败:"),p.msg),n.next=20;break;case 17:n.prev=17,n.t0=n["catch"](10),console.error("第".concat(m,"批费用数据获取异常:"),n.t0);case 20:if(!(d+s<e.length)){n.next=23;break}return n.next=23,a.delay(200);case 23:d+=s,n.next=6;break;case 26:return n.abrupt("return",o);case 27:case"end":return n.stop()}}),n,null,[[10,17]])})))()},getComputeRulesWithSpecial:function(e){var t=this;return(0,s.default)((0,i.default)().mark((function a(){var n,r,o;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.callFunction({url:"admin/hrm/salary/sys/lateclock/getList",title:"获取规则中...",data:{}});case 3:return n=a.sent,a.next=6,c.callFunction({url:"admin/hrm/salary/sys/overtime/getList",title:"获取规则中...",data:{employee_id:"common"}});case 6:if(r=a.sent,0!=n.total){a.next=10;break}return c.alert("请设定迟/早退打卡规则！"),a.abrupt("return",null);case 10:if(0!=r.total){a.next=13;break}return c.alert("请设通用加班规则！"),a.abrupt("return",null);case 13:return c.toast("获取特殊人员加班规则..."),a.next=16,t.batchGetSpecialOvertimeRules(e);case 16:return o=a.sent,a.abrupt("return",{ll_data:n,com_data:r,specialOvertimeMap:o});case 20:return a.prev=20,a.t0=a["catch"](0),console.error("获取计算规则失败:",a.t0),c.alert("获取计算规则失败: ".concat(a.t0.message)),a.abrupt("return",null);case 25:case"end":return a.stop()}}),a,null,[[0,20]])})))()},batchGetSpecialOvertimeRules:function(e){return(0,s.default)((0,i.default)().mark((function t(){var a,n;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new Map,t.prev=1,t.next=4,c.callFunction({url:"admin/hrm/salary/sys/overtime/getList",title:"获取特殊加班规则中...",data:{pageIndex:1,pageSize:-1,whereJson:{employee_id:{$ne:"common",$in:e}}}});case 4:n=t.sent,0===n.code&&n.rows&&n.rows.length>0?(n.rows.forEach((function(e){e.employee_id&&"common"!==e.employee_id&&a.set(e.employee_id,e)})),console.log("获取到".concat(a.size,"个特殊人员的加班规则"))):0!==n.code&&console.warn("获取特殊加班规则失败:",n.msg),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.warn("获取特殊加班规则失败，将使用通用规则:",t.t0);case 11:return t.abrupt("return",a);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},processRowDatas:function(){var e=arguments,t=this;return(0,s.default)((0,i.default)().mark((function a(){var n,r,o;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:[],r=e.length>1?e[1]:void 0,o=e.length>2?e[2]:void 0,a.prev=3,n.forEach((function(e){var a=e.attendance_ym_key;if(!a)throw new Error("无法确定考勤月份");var n="".concat(e.employee_id,"_").concat(a),i=r.get(n)||{};c.pubfn.isNotNull(e.work_days)&&c.pubfn.isNotNull(e.real_days)&&(e.real_days=e.real_days>e.work_days?e.work_days:e.real_days),e.share_cost=i.share_cost||0,e.clothes_cost=i.clothes_cost||0,e.reward_cost=i.reward_cost||0,e.punish_cost=i.punish_cost||0,e.agency_fee=i.agency_fee||0,e.other_cost=i.other_cost||0;var s=t.computeCostsWithSpecial(e,o);e.overtime_cost=s.overtime_cost,e.earlytime_cost=s.earlytime_cost,e.missed_cost=s.missed_cost,e.enable_hr=!1,e.attendance_ym_key=a})),a.abrupt("return",n);case 8:return a.prev=8,a.t0=a["catch"](3),console.error("处理数据失败:",a.t0),a.abrupt("return",[]);case 12:case"end":return a.stop()}}),a,null,[[3,8]])})))()},computeCostsWithSpecial:function(e,t){var a=t.ll_data,n=t.com_data,r=t.specialOvertimeMap,o=e.employee_id,i=e.overtime_hours,s=void 0===i?0:i,c=e.earlytime_hours,l=void 0===c?0:c,d=e.missed_count,u=void 0===d?0:d,m=0;if(0!==s)if(r.has(o)){var p=r.get(o);m=s*(p.overtime_cost||20)}else{var y;m=s*((null===(y=n.rows[0])||void 0===y?void 0:y.overtime_cost)||20)}var h=0,f=(l-a.rows[0].late_min)*a.rows[0].late_price;f>0&&(h=f);var _=0,w=(u-a.rows[0].clock_min)*a.rows[0].clock_price;return w>0&&(_=w),{overtime_cost:m,earlytime_cost:h,missed_cost:_}},delay:function(e){return new Promise((function(t){return setTimeout(t,e)}))},addBtn:function(){this.resetForm(),this.form1.props.action="admin/hrm/attendance/sys/approve/add",this.form1.props.formType="add",this.form1.props.title="添加",this.form1.props.show=!0},updateBtn:function(e){var t=e.item;this.form1.props.action="admin/hrm/attendance/sys/approve/update",this.form1.props.formType="update",this.form1.props.title="编辑",this.form1.props.show=!0,this.form1.data=t},deleteBtn:function(e){var t=e.item,a=e.deleteFn;a({action:"admin/hrm/attendance/sys/approve/delete",data:{_id:t._id}})},batchBtn:function(e){var t=this;return(0,s.default)((0,i.default)().mark((function a(){return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:a.t0=e,a.next=1===a.t0?3:2===a.t0?8:13;break;case 3:return a.next=5,c.callFunction({url:"admin/hrm/attendance/sys/all/updateAll",title:"请求中...",data:{items:t.table1.multipleSelection,enable_hr:!0}});case 5:return a.sent,t.refresh(),a.abrupt("break",14);case 8:return a.next=10,c.callFunction({url:"admin/hrm/attendance/sys/all/updateAll",title:"请求中...",data:{items:t.table1.multipleSelection,enable_hr:!1}});case 10:return a.sent,t.refresh(),a.abrupt("break",14);case 13:return a.abrupt("break",14);case 14:case"end":return a.stop()}}),a)})))()}},watch:{},computed:{}};t.default=y},8440:function(e,t,a){"use strict";var n=a("9f06"),r=a.n(n);r.a},"8e55":function(e,t,a){var n=a("c86c");t=n(!1),t.push([e.i,"",""]),e.exports=t},"9f06":function(e,t,a){var n=a("8e55");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("967d").default;r("7df2b074",n,!0,{sourceMap:!1,shadowMode:!1})},c4c2:function(e,t,a){"use strict";a.r(t);var n=a("7048"),r=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=r.a},e3b8:function(e,t,a){"use strict";a.r(t);var n=a("4a7d"),r=a("c4c2");for(var o in r)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(o);a("8440");var i=a("828b"),s=Object(i["a"])(r["default"],n["b"],n["c"],!1,null,"8e32bb88",null,!1,n["a"],void 0);t["default"]=s.exports}}]);