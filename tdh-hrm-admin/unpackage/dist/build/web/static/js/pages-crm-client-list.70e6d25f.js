(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-crm-client-list"],{"10d7":function(e,t,i){"use strict";var a=i("ea4e"),n=i.n(a);n.a},"19c3":function(e,t,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("2634")),r=a(i("2fdc"));i("5c47"),i("af8f"),i("fd3c");var o=uni.vk,l={},s={data:function(){var e=this;return{loading:!1,data:{},table1:{action:"admin/crm/client/sys/getList",rightBtns:[{mode:"detail_auto",title:"详细",show:function(t){return e.$hasRole("admin")||e.$hasPermission("client-info-view")}},{mode:"update",title:"编辑",show:function(t){return e.$hasRole("admin")||e.$hasPermission("client-info-edit")}},{mode:"delete",title:"删除",show:function(t){return e.$hasRole("admin")||e.$hasPermission("client-info-delete")}}],columns:[{key:"companyName",title:"企业名称",type:"text",width:200},{key:"industry",title:"所属行业",type:"text",width:150},{key:"establishmentDate",title:"成立时间",type:"date",dateType:"date",valueFormat:"yyyy-MM-dd",width:150},{key:"registeredCapital",title:"注册资本",type:"number",width:150,formatter:function(e){return e?e+"万元":""}},{key:"contactName",title:"对接人",type:"text",width:150},{key:"contactPhone",title:"联系电话",type:"text",width:150},{key:"employeeCount",title:"员工总数",type:"number",width:150},{key:"monthlyPayroll",title:"月工资额",type:"number",width:150,formatter:function(e){return e?e+"万元":""}},{key:"softwareCopyrights",title:"软件著作权",type:"number",width:150},{key:"inventionAuthorized",title:"发明授权",type:"number",width:150},{key:"update_date",title:"更新时间",type:"time",width:200,show:["detail"]},{key:"users.nickname",title:"更新人",type:"text",width:200,show:["detail"]}],multipleSelection:[],selectItem:""},queryForm1:{formData:{},columns:[{key:"companyName",title:"企业名称",type:"text",width:200,mode:"%%"},{key:"industry",title:"所属行业",type:"text",width:150,mode:"%%"},{key:"contactName",title:"对接人姓名",type:"text",width:150,mode:"%%"},{key:"contactPhone",title:"联系电话",type:"text",width:150,mode:"%%"},{key:"establishmentDate",title:"成立时间",type:"daterange",dateType:"datetime",width:200,mode:"[]"}]},form1:{data:{},props:{action:"",columns:[{key:"companyName",title:"企业名称",type:"text",width:200},{key:"industry",title:"所属行业",type:"text",width:200},{key:"establishmentDate",title:"成立时间",type:"date",dateType:"date",width:200},{key:"registeredCapital",title:"注册资本(万元)",type:"number",precision:2,width:200},{key:"paidInCapital",title:"实收资本(万元)",type:"number",precision:2,width:200},{key:"companyAddress",title:"公司地址",type:"textarea",maxlength:"200",showWordLimit:!0,width:200,autosize:{minRows:2,maxRows:4}},{key:"contactName",title:"对接人姓名",type:"text",width:200},{key:"contactPhone",title:"对接人电话",type:"text",width:200},{key:"contactPosition",title:"对接人职务",type:"text",width:200},{key:"taxpayerType",title:"纳税人类型",type:"select",multiple:!0,data:[{value:"一般纳税人",label:"一般纳税人"},{value:"小微企业",label:"小微企业"},{value:"个体户",label:"个体户"}],width:200},{key:"enterpriseNature",title:"企业性质",type:"select",multiple:!0,data:[{value:"内资企业",label:"内资企业"},{value:"台资企业",label:"台资企业"},{value:"港资企业",label:"港资企业"},{value:"中外合资",label:"中外合资"},{value:"外资企业",label:"外资企业"}],width:200},{key:"listingType",title:"上市类型",type:"select",multiple:!0,data:[{value:"未上市",label:"未上市"},{value:"国内主板上市公司",label:"国内主板上市公司"},{value:"港板",label:"港板"},{value:"新三板",label:"新三板"},{value:"其它列明",label:"其它列明"}],width:200},{key:"listingBoard",title:"上市板块",type:"text",width:200,placeholder:"如：创业板、科创板等"},{key:"enterpriseQualifications",title:"企业资质",type:"select",multiple:!0,data:[{value:"国高认证",label:"国高认证"},{value:"专精新认证",label:"专精新认证"},{value:"科小认证",label:"科小认证"}],width:200},{key:"basicAccountBank",title:"基本户银行",type:"text",width:200,placeholder:"请输入基本户银行"},{key:"employeeCount",title:"员工总数",type:"number",width:200,placeholder:"请输入员工总数"},{key:"monthlyPayroll",title:"月代发工资额(万元)",type:"number",precision:2,width:200,placeholder:"请输入月代发工资额"},{key:"seniorCertified",title:"高级认证人数",type:"number",width:200},{key:"intermediateCertified",title:"中级认证人数",type:"number",width:200},{key:"masterDegree",title:"硕士人数",type:"number",width:200},{key:"doctorDegree",title:"博士及以上人数",type:"number",width:200},{key:"legalRepresentative",title:"法人",type:"text",width:200},{key:"actualController",title:"实际控制人",type:"text",width:200},{key:"generalManager",title:"总经理",type:"text",width:200},{key:"coreStaff",title:"核心人员(逗号分隔)",type:"text",width:200,placeholder:"请输入核心人员姓名，多个用逗号分隔"},{key:"shareholders",title:"股东情况",type:"text",width:200},{key:"controllerShareholding",title:"实控人持股比例(%)",type:"number",precision:2,width:200},{key:"companyIntroduction",title:"公司介绍",type:"textarea",maxlength:"200",showWordLimit:!0,width:200,autosize:{minRows:2,maxRows:4}},{key:"softwareCopyrights",title:"软件著作权数量",type:"number",width:200},{key:"companyHolding",title:"股东关系说明",type:"textarea",maxlength:"200",showWordLimit:!0,width:200,autosize:{minRows:2,maxRows:4}},{key:"trademarksTotal",title:"商标总数",type:"number",width:200},{key:"trademarksBrandCount",title:"其中品牌数",type:"number",width:200},{key:"inventionAuthorized",title:"发明授权数量",type:"number",width:200},{key:"specialTechnologies",title:"专项技术",type:"textarea",width:200,autosize:{minRows:2,maxRows:4}},{key:"utilityModel",title:"实用新型数量",type:"number",width:200},{key:"appearanceDesign",title:"外观设计数量",type:"number",width:200},{key:"inventionPublished",title:"发明公布数量",type:"number",width:200},{key:"rdPersonnelCount",title:"研发人数",type:"number",width:200},{key:"rdInvestment",title:"研发投入介绍",type:"textarea",maxlength:"200",showWordLimit:!0,width:200,autosize:{minRows:2,maxRows:4}}],rules:{companyName:[{required:!0,message:"企业名称不能为空",trigger:["blur","change"]}],industry:[{required:!0,message:"所属行业不能为空",trigger:["blur","change"]}],establishmentDate:[{required:!0,message:"成立时间不能为空",trigger:["blur","change"]}],registeredCapital:[{required:!0,message:"注册资本不能为空",trigger:["blur","change"]}],companyAddress:[{required:!0,message:"公司地址不能为空",trigger:["blur","change"]}],contactName:[{required:!0,message:"对接人姓名不能为空",trigger:["blur","change"]}],contactPhone:[{required:!0,message:"对接人电话不能为空",trigger:["blur","change"]},{validator:o.pubfn.validator("mobile"),message:"电话格式错误",trigger:"blur"}],employeeCount:[{required:!0,message:"员工总数不能为空",trigger:["blur","change"]}],legalRepresentative:[{required:!0,message:"法人不能为空",trigger:["blur","change"]}],actualController:[{required:!0,message:"实际控制人不能为空",trigger:["blur","change"]}]},formType:"",title:"",show:!1}},formDatas:{}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o=this.vk,this.options=e,this.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){l["form1"]=o.pubfn.copyObject(this.form1)},pageTo:function(e){o.navigateTo(e)},resetForm:function(){o.pubfn.resetForm(l,this)},search:function(){this.$refs.table1.search()},refresh:function(){this.$refs.table1.refresh()},getCurrentRow:function(){return this.$refs.table1.getCurrentRow()},currentChange:function(e){this.table1.selectItem=e},selectionChange:function(e){this.table1.multipleSelection=e},addBtn:function(){this.resetForm(),this.form1.props.action="admin/crm/client/sys/add",this.form1.props.formType="add",this.form1.props.title="添加客户资料",this.form1.props.show=!0},updateBtn:function(e){var t=e.item;this.form1.props.action="admin/crm/client/sys/update",this.form1.props.formType="update",this.form1.props.title="编辑客户资料",this.form1.props.show=!0,this.form1.data=t},deleteBtn:function(e){var t=e.item,i=e.deleteFn;i({action:"admin/crm/client/sys/delete",data:{_id:t._id}})},batchBtn:function(e){var t=this;switch(e){case 1:if(0===this.table1.multipleSelection.length)return void o.toast("请先选择要删除的记录");o.confirm("确定要删除选中的"+this.table1.multipleSelection.length+"条记录吗？","提示",(0,r.default)((0,n.default)().mark((function e(){var i,a;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.table1.multipleSelection.map((function(e){return e._id})),e.next=3,o.callFunction({url:"admin/crm/client/sys/batchDelete",title:"删除中...",data:{ids:i}});case 3:a=e.sent,0===a.code&&(o.toast("删除成功"),t.refresh());case 5:case"end":return e.stop()}}),e)}))));break;case 2:o.toast("批量导出功能开发中...");break;default:break}}},watch:{},computed:{}};t.default=s},a3e5:function(e,t,i){var a=i("c86c");t=a(!1),t.push([e.i,"",""]),e.exports=t},c07f:function(e,t,i){"use strict";i.r(t);var a=i("19c3"),n=i.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(r);t["default"]=n.a},c44a:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"page-body"},[i("vk-data-table-query",{attrs:{columns:e.queryForm1.columns},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)}},scopedSlots:e._u([{key:"establishmentDate",fn:function(){return[i("vk-data-input-date-time",{attrs:{type:"daterange"},model:{value:e.queryForm1.formData.establishmentDate,callback:function(t){e.$set(e.queryForm1.formData,"establishmentDate",t)},expression:"queryForm1.formData.establishmentDate"}})]},proxy:!0}]),model:{value:e.queryForm1.formData,callback:function(t){e.$set(e.queryForm1,"formData",t)},expression:"queryForm1.formData"}}),i("v-uni-view",[i("el-row",[e.$hasRole("admin")||e.$hasPermission("client-info-add")?i("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addBtn.apply(void 0,arguments)}}},[e._v("添加")]):e._e(),e.table1.multipleSelection?i("el-dropdown",{attrs:{"split-button":!1,trigger:"click"},on:{command:function(t){arguments[0]=t=e.$handleEvent(t),e.batchBtn.apply(void 0,arguments)}}},[i("el-button",{staticStyle:{"margin-left":"20rpx"},attrs:{type:"danger",size:"small",disabled:0===e.table1.multipleSelection.length}},[e._v(" 批量操作"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:1}},[e._v("批量删除")]),i("el-dropdown-item",{attrs:{command:2}},[e._v("批量导出")])],1)],1):e._e()],1)],1),i("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,"right-btns":e.table1.rightBtns,selection:!0,"row-no":!0,pagination:!0},on:{update:function(t){arguments[0]=t=e.$handleEvent(t),e.updateBtn.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}}),i("vk-data-dialog",{attrs:{title:e.form1.props.title,width:"800px",mode:"form","close-on-click-modal":!1},model:{value:e.form1.props.show,callback:function(t){e.$set(e.form1.props,"show",t)},expression:"form1.props.show"}},[i("vk-data-form",{attrs:{rules:e.form1.props.rules,action:e.form1.props.action,"form-type":e.form1.props.formType,columns:e.form1.props.columns,inline:!0,"label-width":"140px",columnsNumber:2},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.form1.props.show=!1,e.refresh()}},model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)],1)},n=[]},d579:function(e,t,i){"use strict";i.r(t);var a=i("c44a"),n=i("c07f");for(var r in n)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(r);i("10d7");var o=i("828b"),l=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"48824116",null,!1,a["a"],void 0);t["default"]=l.exports},ea4e:function(e,t,i){var a=i("a3e5");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("967d").default;n("7fc1c1a3",a,!0,{sourceMap:!1,shadowMode:!1})}}]);