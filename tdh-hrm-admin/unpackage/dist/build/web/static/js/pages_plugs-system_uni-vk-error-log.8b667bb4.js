(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_plugs-system_uni-vk-error-log"],{"1b0a":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page-body"},[a("vk-data-table-query",{attrs:{columns:t.queryForm1.columns},on:{search:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}},model:{value:t.queryForm1.formData,callback:function(e){t.$set(t.queryForm1,"formData",e)},expression:"queryForm1.formData"}}),a("vk-data-table",{ref:"table1",attrs:{action:t.table1.action,columns:t.table1.columns,"query-form-param":t.queryForm1,"right-btns":["detail_auto"],"custom-right-btns":t.table1.customRightBtns,"default-sort":{name:"count",type:"desc"},"secondary-sort-key":"_id","row-no":!0,pagination:!0}}),a("vk-data-dialog",{attrs:{title:t.form1.props.title,width:"800px",mode:"form"},model:{value:t.form1.props.show,callback:function(e){t.$set(t.form1.props,"show",e)},expression:"form1.props.show"}},[a("vk-data-form",{ref:"form1",attrs:{rules:t.form1.props.rules,action:t.form1.props.action,"form-type":t.form1.props.formType,columns:t.form1.props.columns,"label-width":"80px"},on:{success:function(e){arguments[0]=e=t.$handleEvent(e),t.updateSuccess.apply(void 0,arguments)}},scopedSlots:t._u([{key:"stack",fn:function(e){var o=e.form;e.keyName;return[a("v-uni-view",{staticClass:"stack-view"},[o.err?a("v-uni-text",{staticStyle:{"font-size":"13px"},attrs:{space:"ensp"}},[t._v(t._s(o.err.stack))]):t._e()],1)]}}]),model:{value:t.form1.data,callback:function(e){t.$set(t.form1,"data",e)},expression:"form1.data"}})],1)],1)},r=[]},"28e4":function(t,e,a){"use strict";var o;a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("5c47"),a("a1c1"),a("c223");var r=uni.vk,i=[{value:0,label:"待处理",tagType:"danger"},{value:1,label:"已处理",tagType:"success"},{value:2,label:"不处理",tagType:"info"}],n={data:function(){var t=this;return{loading:!1,data:{},table1:{action:"admin/system_uni/error-log/sys/getList",columns:[{key:"userInfo",title:"用户信息",type:"userInfo",width:150},{key:"request_id",title:"请求ID",type:"text",width:300},{key:"url",title:"请求地址",type:"text",width:300},{key:"data",title:"请求参数",type:"json",width:190},{key:"count",title:"出现次数",type:"number",width:110,sortable:"custom"},{key:"status",title:"当前状态",type:"tag",width:100,data:i},{key:"err.message",title:"错误信息",type:"text",width:300,show:["rows"]},{key:"err",title:"错误堆栈",type:"html",width:200,show:["detail"],formatter:function(t,e,a,o){var r=t.stack.replace(/\n/g,"<br>");return r}},{key:"_add_time",title:"添加时间",type:"time",width:160,sortable:"custom"},{key:"_add_time",title:"距离现在",type:"dateDiff",width:120},{key:"md5",title:"MD5值",type:"text",width:280}],multipleSelection:[],selectItem:"",customRightBtns:[{title:"处理",type:"primary",icon:"el-icon-edit",disabled:function(t){return 0!==t.status},onClick:function(e){t.updateBtn({item:r.pubfn.copyObject(e)})}}]},queryForm1:{formData:{dcloud_appid:"",status:0,_add_time:[]},columns:[{key:"request_id",title:"请求ID",type:"text",width:140,mode:"="},{key:"user_id",title:"用户ID",type:"text",width:140,mode:"="},{key:"url",title:"请求地址",type:"text",width:140,mode:"="},{key:"status",title:"当前状态",type:"select",width:140,mode:"=",clearable:!1,data:[{value:"",label:"全部"}].concat(i)},{key:"_add_time",title:"添加时间",type:"datetimerange",width:380,mode:"[]",clearable:!1}]},form1:{data:{},props:{action:"",columns:[{key:"md5",title:"md5",type:"text-view"},{key:"stack",title:"错误堆栈",type:"text-view"},{key:"status",title:"当前状态",type:"radio",optionType:"button",width:140,clearable:!1,data:i},{key:"comment",title:"备注",type:"textarea",placeholder:"请输入备注",autosize:{minRows:4,maxRows:10},maxlength:1e3,showWordLimit:!0}],rules:{},formType:"",show:!1}}}},onLoad:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o=this,r=o.vk,o.options=t,o.init(t)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(t){var e=r.pubfn.getDayOffsetStartAndEnd(-7),a=e.startTime,i=r.pubfn.getDayOffsetStartAndEnd(0),n=i.endTime;o.queryForm1.formData._add_time=[a,n]},search:function(t){o.$refs.table1.query(t)},refresh:function(){o.$refs.table1.refresh()},updateBtn:function(t){var e=t.item;o.form1.props.action="admin/system_uni/error-log/sys/update",o.form1.props.formType="update",o.form1.props.title="处理",o.form1.props.show=!0,o.form1.data=e},updateSuccess:function(){o.form1.props.show=!1,o.$refs.table1.updateRows({mode:"update",rows:[{_id:o.form1.data._id,status:o.form1.data.status}]})}},watch:{},computed:{}};e.default=n},67482:function(t,e,a){"use strict";var o=a("7c69"),r=a.n(o);r.a},"7c69":function(t,e,a){var o=a("b2ea");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=a("967d").default;r("7fe806fa",o,!0,{sourceMap:!1,shadowMode:!1})},b2ea:function(t,e,a){var o=a("c86c");e=o(!1),e.push([t.i,".stack-view[data-v-20130905]{background-color:#f6f8fa;padding:5px 10px;line-height:24px!important;max-height:400px;overflow-y:auto}",""]),t.exports=e},b82e:function(t,e,a){"use strict";a.r(e);var o=a("28e4"),r=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},c3d2:function(t,e,a){"use strict";a.r(e);var o=a("1b0a"),r=a("b82e");for(var i in r)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(i);a("67482");var n=a("828b"),s=Object(n["a"])(r["default"],o["b"],o["c"],!1,null,"20130905",null,!1,o["a"],void 0);e["default"]=s.exports}}]);