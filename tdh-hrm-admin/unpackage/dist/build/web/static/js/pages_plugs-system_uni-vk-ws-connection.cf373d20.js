(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_plugs-system_uni-vk-ws-connection"],{"0ad1":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page-body"},[n("vk-data-table-query",{attrs:{columns:e.queryForm1.columns},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)}},model:{value:e.queryForm1.formData,callback:function(t){e.$set(e.queryForm1,"formData",t)},expression:"queryForm1.formData"}}),n("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,"right-btns":["detail_auto","more"],"right-btns-more":e.table1.rightBtnsMore,"row-no":!0,pagination:!0},on:{delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}})],1)},o=[]},"0eb5":function(e,t,n){"use strict";var i;n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("fd3c"),n("c223");var o=uni.vk,a={},u={data:function(){var e=this;return{loading:!1,data:{},table1:{action:"admin/system_uni/ws-connection/sys/getList",columns:[{key:"appid",title:"DCloud appid",type:"text",width:160},{key:"_id",title:"连接ID（cid）",type:"text",width:300},{key:"userInfo",title:"用户",type:"userInfo",width:160,defaultValue:"-"},{key:"device_id",title:"设备ID",type:"text",width:180},{key:"url",title:"云对象URL",type:"text",width:260},{key:"_add_time",title:"连接时间",type:"time",width:160},{key:"_add_time",title:"距离现在",type:"dateDiff",width:100}],multipleSelection:[],selectItem:"",rightBtnsMore:[{title:"强制断开连接",onClick:function(t){o.callFunction({url:"admin/system_uni/ws-connection/sys/delete",title:"请求中...",data:{cid:t._id},success:function(t){e.refresh()}})}},{title:"强制该设备退出登录",onClick:function(t){o.callFunction({url:"admin/system_uni/ws-connection/sys/forceLogout",title:"请求中...",data:{cid:t._id,url:t.url},success:function(t){e.refresh()}})}},{title:"强制该用户退出登录",disabled:function(e){return!e.user_id},onClick:function(t){o.callFunction({url:"admin/system_uni/ws-connection/sys/forceLogout",title:"请求中...",data:{user_id:t.user_id,url:t.url},success:function(t){e.refresh()}})}}]},queryForm1:{formData:{},columns:[{key:"appid",title:"DCloud appid",type:"select",filterable:!0,clearable:!0,width:220,data:[]},{key:"_id",title:"连接ID",type:"text",width:180,mode:"="},{key:"user_id",type:"text",title:"用户ID",width:160,mode:"="},{key:"device_id",type:"text",title:"设备ID",width:160,mode:"="},{key:"url",type:"text",title:"云对象URL",width:160,mode:"="},{key:"_add_time",type:"datetimerange",title:"连接时间",width:360,mode:"[]"}]}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=this,o=i.vk,i.options=e,i.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){var t=this;a["form1"]=o.pubfn.copyObject(i.form1),o.callFunction({url:"admin/system/app/sys/getList",data:{},success:function(e){var n=o.pubfn.getListIndex(t.queryForm1.columns,"key","appid"),i=e.rows.map((function(e){return{label:"".concat(e.appid,"（").concat(e.name,"）"),value:e.appid}}));t.queryForm1.columns[n].data=i}})},pageTo:function(e){o.navigateTo(e)},resetForm:function(){o.pubfn.resetForm(a,i)},search:function(e){i.$refs.table1.query(e)},refresh:function(){i.$refs.table1.refresh()},getCurrentRow:function(){return i.$refs.table1.getCurrentRow()},currentChange:function(e){i.table1.selectItem=e},selectionChange:function(e){i.table1.multipleSelection=e},deleteBtn:function(e){var t=e.item,n=e.deleteFn;n({action:"admin/system_uni/ws-connection/sys/delete",data:{_id:t._id}})}},watch:{},computed:{}};t.default=u},"3e4f":function(e,t,n){"use strict";n.r(t);var i=n("0ad1"),o=n("cee8");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var u=n("828b"),r=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"4e1010e8",null,!1,i["a"],void 0);t["default"]=r.exports},cee8:function(e,t,n){"use strict";n.r(t);var i=n("0eb5"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a}}]);