(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bpmn-definition-list"],{6139:function(e,t,a){var n=a("c86c");t=n(!1),t.push([e.i,'@charset "UTF-8";.page-body[data-v-a9dfe76e]{padding:%?24?%}.action-bar[data-v-a9dfe76e]{margin-bottom:%?24?%;padding:%?20?%;background:#fff;border-radius:%?8?%;-webkit-box-shadow:0 %?2?% %?12?% rgba(0,0,0,.1);box-shadow:0 %?2?% %?12?% rgba(0,0,0,.1)}.form-section[data-v-a9dfe76e]{margin-bottom:%?32?%}.form-section .section-header[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-bottom:%?24?%;padding-bottom:%?16?%;border-bottom:%?2?% solid #f0f2f5}.form-section .section-header .section-title[data-v-a9dfe76e]{font-size:%?32?%;font-weight:600;color:#303133;margin-bottom:%?8?%}.form-section .section-header .section-desc[data-v-a9dfe76e]{font-size:%?26?%;color:#909399}.node-designer[data-v-a9dfe76e]{border:%?2?% solid #e4e7ed;border-radius:%?12?%;padding:%?32?%;background:#fff}.designer-toolbar[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;gap:%?16?%;margin-bottom:%?24?%;padding-bottom:%?24?%;border-bottom:%?1?% solid #e4e7ed}.node-stats[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;gap:%?32?%;margin-bottom:%?24?%;padding:%?20?%;background:#f8f9fa;border-radius:%?8?%}.node-stats .stat-item[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.node-stats .stat-item .stat-label[data-v-a9dfe76e]{font-size:%?24?%;color:#909399;margin-bottom:%?8?%}.node-stats .stat-item .stat-value[data-v-a9dfe76e]{font-size:%?28?%;font-weight:600;color:#303133}.nodes-container[data-v-a9dfe76e]{display:grid;grid-template-columns:repeat(auto-fill,minmax(%?380?%,1fr));gap:%?24?%;margin-bottom:%?32?%}.empty-nodes[data-v-a9dfe76e]{grid-column:1/-1;text-align:center;padding:%?80?% %?20?%;background:#fafafa;border:%?2?% dashed #dcdfe6;border-radius:%?12?%}.empty-nodes .empty-image[data-v-a9dfe76e]{width:%?120?%;height:%?120?%;margin-bottom:%?24?%;opacity:.6}.empty-nodes .empty-title[data-v-a9dfe76e]{display:block;font-size:%?32?%;color:#909399;margin-bottom:%?16?%}.empty-nodes .empty-desc[data-v-a9dfe76e]{display:block;font-size:%?26?%;color:#c0c4cc}.node-item[data-v-a9dfe76e]{background:#fff;border:%?2?% solid #e4e7ed;border-radius:%?12?%;padding:%?24?%;-webkit-box-shadow:0 %?2?% %?8?% rgba(0,0,0,.08);box-shadow:0 %?2?% %?8?% rgba(0,0,0,.08);-webkit-transition:all .3s ease;transition:all .3s ease;position:relative;overflow:hidden}.node-item[data-v-a9dfe76e]:hover{-webkit-box-shadow:0 %?4?% %?16?% rgba(0,0,0,.12);box-shadow:0 %?4?% %?16?% rgba(0,0,0,.12);-webkit-transform:translateY(%?-4?%);transform:translateY(%?-4?%)}.node-item[data-v-a9dfe76e]::before{content:"";position:absolute;top:0;left:0;width:%?8?%;height:100%}.node-start[data-v-a9dfe76e]::before{background:#52c41a}.node-end[data-v-a9dfe76e]::before{background:#fa541c}.node-userTask[data-v-a9dfe76e]::before,\n.node-approval[data-v-a9dfe76e]::before,\n.node-review[data-v-a9dfe76e]::before{background:#1890ff}.node-gateway[data-v-a9dfe76e]::before{background:#722ed1}.node-header[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;margin-bottom:%?20?%}.node-header .node-badge[data-v-a9dfe76e]{background:#f0f2f5;border-radius:%?6?%;padding:%?8?% %?12?%;margin-right:%?16?%}.node-header .node-badge .node-index[data-v-a9dfe76e]{font-size:%?22?%;font-weight:600;color:#606266}.node-header .node-info[data-v-a9dfe76e]{-webkit-box-flex:1;-ms-flex:1;flex:1}.node-header .node-info .node-name[data-v-a9dfe76e]{display:block;font-size:%?28?%;font-weight:600;color:#303133;margin-bottom:%?4?%}.node-header .node-info .node-key[data-v-a9dfe76e]{display:block;font-size:%?22?%;color:#909399;font-family:monospace}.node-header .node-type-tag[data-v-a9dfe76e]{background:#409eff;color:#fff;padding:%?6?% %?12?%;border-radius:%?20?%;font-size:%?20?%}.node-header .node-type-tag uni-text[data-v-a9dfe76e]{font-size:%?20?%}.node-start .node-type-tag[data-v-a9dfe76e]{background:#52c41a}.node-end .node-type-tag[data-v-a9dfe76e]{background:#fa541c}.node-userTask .node-type-tag[data-v-a9dfe76e],\n.node-approval .node-type-tag[data-v-a9dfe76e],\n.node-review .node-type-tag[data-v-a9dfe76e]{background:#1890ff}.node-gateway .node-type-tag[data-v-a9dfe76e]{background:#722ed1}.node-content[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:%?12?%;margin-bottom:%?20?%}.node-field[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.node-field .field-label[data-v-a9dfe76e]{font-size:%?24?%;color:#606266;width:%?140?%;-ms-flex-negative:0;flex-shrink:0}.node-field .field-value[data-v-a9dfe76e]{font-size:%?24?%;color:#303133;-webkit-box-flex:1;-ms-flex:1;flex:1}.actions-tags[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:%?8?%}.actions-tags .action-tag[data-v-a9dfe76e]{background:#ecf5ff;color:#409eff;padding:%?4?% %?12?%;border-radius:%?12?%;font-size:%?20?%;border:%?1?% solid #d9ecff}.next-nodes[data-v-a9dfe76e]{margin-top:%?16?%;padding-top:%?16?%;border-top:%?1?% dashed #e4e7ed}.next-nodes .next-label[data-v-a9dfe76e]{display:block;font-size:%?22?%;color:#909399;margin-bottom:%?8?%}.next-nodes .next-nodes-list[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:%?8?%}.next-nodes .next-node-item[data-v-a9dfe76e]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:%?22?%;color:#1890ff;background:#f0f7ff;padding:%?8?% %?16?%;border-radius:%?8?%;border:%?1?% solid #d1e8ff}.next-nodes .next-node-item .condition-tag[data-v-a9dfe76e]{font-size:%?18?%;color:#fa541c;background:#fff2e8;padding:%?2?% %?8?%;border-radius:%?6?%;margin-left:%?8?%}.next-nodes .next-node-item .default-tag[data-v-a9dfe76e]{font-size:%?18?%;color:#52c41a;background:#f6ffed;padding:%?2?% %?8?%;border-radius:%?6?%;margin-left:%?8?%}.node-actions[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;gap:%?8?%;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.design-tips[data-v-a9dfe76e]{background:#f0f7ff;border:%?1?% solid #d1e8ff;border-radius:%?8?%;padding:%?24?%}.design-tips .tips-header[data-v-a9dfe76e]{margin-bottom:%?16?%}.design-tips .tips-header .tips-title[data-v-a9dfe76e]{font-size:%?26?%;font-weight:600;color:#1890ff}.design-tips .tips-list[data-v-a9dfe76e]{margin:0;padding-left:%?32?%}.design-tips .tips-list li[data-v-a9dfe76e]{font-size:%?24?%;color:#606266;margin-bottom:%?8?%;line-height:1.5}\n/* èŠ‚ç‚¹ç¼–è¾‘å¼¹çª—æ ·å¼ */.node-form-dialog[data-v-a9dfe76e]  .el-tabs__header{margin-bottom:%?24?%}.node-form-dialog[data-v-a9dfe76e]  .el-tab-pane{padding:0 %?8?%}\n/* è¿æ¥é…ç½®å¼¹çª—æ ·å¼ */.connection-dialog[data-v-a9dfe76e]{padding:0 %?8?%}.current-node-info[data-v-a9dfe76e]{margin-bottom:%?32?%}.current-node-info .current-node-card[data-v-a9dfe76e]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:%?24?%;border-radius:%?12?%;position:relative;overflow:hidden}.current-node-info .current-node-card[data-v-a9dfe76e]::before{content:"";position:absolute;top:0;right:0;width:%?120?%;height:%?120?%;background:hsla(0,0%,100%,.1);border-radius:50%;-webkit-transform:translate(%?30?%,%?-30?%);transform:translate(%?30?%,%?-30?%)}.current-node-info .current-node-card .card-label[data-v-a9dfe76e]{display:block;font-size:%?24?%;opacity:.9;margin-bottom:%?8?%}.current-node-info .current-node-card .node-name[data-v-a9dfe76e]{display:block;font-size:%?32?%;font-weight:600;margin-bottom:%?4?%}.current-node-info .current-node-card .node-key[data-v-a9dfe76e]{display:block;font-size:%?24?%;opacity:.8;margin-bottom:%?8?%;font-family:monospace}.current-node-info .current-node-card .node-type[data-v-a9dfe76e]{display:inline-block;background:hsla(0,0%,100%,.2);padding:%?4?% %?12?%;border-radius:%?20?%;font-size:%?22?%}.connections-section[data-v-a9dfe76e]{margin-bottom:%?32?%}.connections-section .section-header[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:%?24?%}.connections-section .section-header .section-title[data-v-a9dfe76e]{font-size:%?28?%;font-weight:600;color:#303133}.connections-list[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:%?20?%}.empty-connections[data-v-a9dfe76e]{text-align:center;padding:%?60?% %?20?%;background:#fafafa;border:%?2?% dashed #e4e7ed;border-radius:%?8?%}.empty-connections .empty-text[data-v-a9dfe76e]{font-size:%?26?%;color:#909399}.connection-item[data-v-a9dfe76e]{background:#f8f9fa;border:%?1?% solid #e4e7ed;border-radius:%?8?%;padding:%?20?%}.connection-item .connection-header[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:%?16?%}.connection-item .connection-header .connection-title[data-v-a9dfe76e]{font-size:%?24?%;font-weight:600;color:#303133}.connection-item .connection-form .form-row[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;gap:%?20?%;margin-bottom:%?16?%}.connection-item .connection-form .form-row[data-v-a9dfe76e]:last-child{margin-bottom:0}.connection-item .connection-form .form-row .form-field[data-v-a9dfe76e]{-webkit-box-flex:1;-ms-flex:1;flex:1}.connection-item .connection-form .form-row .form-field .field-label[data-v-a9dfe76e]{display:block;font-size:%?24?%;color:#606266;margin-bottom:%?8?%}.connection-guide[data-v-a9dfe76e]{background:#f6ffed;border:%?1?% solid #b7eb8f;border-radius:%?8?%;padding:%?24?%}.connection-guide .guide-header[data-v-a9dfe76e]{margin-bottom:%?16?%}.connection-guide .guide-header .guide-title[data-v-a9dfe76e]{font-size:%?26?%;font-weight:600;color:#52c41a}.connection-guide .guide-content[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:%?12?%}.connection-guide .guide-content .guide-item[data-v-a9dfe76e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:%?12?%}.connection-guide .guide-content .guide-item .guide-icon[data-v-a9dfe76e]{font-size:%?24?%;-ms-flex-negative:0;flex-shrink:0;margin-top:%?2?%}.connection-guide .guide-content .guide-item .guide-text[data-v-a9dfe76e]{font-size:%?24?%;color:#606266;line-height:1.5}\n/* å“åº”å¼è°ƒæ•´ */@media (max-width:768px){.nodes-container[data-v-a9dfe76e]{grid-template-columns:1fr}.node-stats[data-v-a9dfe76e]{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:distribute;justify-content:space-around}.connection-form .form-row[data-v-a9dfe76e]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}}',""]),e.exports=t},"6fa5":function(e,t,a){"use strict";var n=a("d487"),i=a.n(n);i.a},"95ab":function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("3471")),o=n(a("b7c7")),s=n(a("2634")),d=n(a("2fdc"));a("c223"),a("8f71"),a("bf0f"),a("4626"),a("5c47"),a("af8f"),a("fd3c"),a("dd2b"),a("aa9c"),a("5ac7"),a("7a76"),a("c9b5"),a("f3f7"),a("18f7"),a("de6c"),a("aa77");var l=uni.vk,r={},c={data:function(){var e=this;return{loading:!1,data:{},connectionDialog:{show:!1,title:"é…ç½®èŠ‚ç‚¹è¿æ¥",currentNode:{},currentNodeIndex:-1,connections:[]},conditionRules:[],nodeDialog:{show:!1,title:"æ·»åŠ èŠ‚ç‚¹",data:{},editingIndex:-1,activeTab:"basic",rules:{node_key:[{required:!0,message:"è¯·è¾“å…¥èŠ‚ç‚¹KEY",trigger:["blur","change"]}],node_name:[{required:!0,message:"è¯·è¾“å…¥èŠ‚ç‚¹åç§°",trigger:["blur","change"]}],node_type:[{required:!0,message:"è¯·é€‰æ‹©èŠ‚ç‚¹ç±»å‹",trigger:["blur","change"]}]},basicColumns:[{key:"node_key",title:"èŠ‚ç‚¹KEY",type:"text",placeholder:"èŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†ï¼Œå¦‚ï¼šstartã€approve_1",tip:"èŠ‚ç‚¹KEYåœ¨æµç¨‹å†…å¿…é¡»å”¯ä¸€ï¼Œå»ºè®®ä½¿ç”¨è‹±æ–‡å’Œæ•°å­—"},{key:"node_name",title:"èŠ‚ç‚¹åç§°",type:"text",placeholder:"å¦‚ï¼šå¼€å§‹èŠ‚ç‚¹ã€éƒ¨é—¨å®¡æ‰¹",tip:"èŠ‚ç‚¹æ˜¾ç¤ºåç§°ï¼Œä¾¿äºè¯†åˆ«"},{key:"node_type",title:"èŠ‚ç‚¹ç±»å‹",type:"radio",data:[{value:"start",label:"å¼€å§‹èŠ‚ç‚¹"},{value:"end",label:"ç»“æŸèŠ‚ç‚¹"},{value:"userTask",label:"ç”¨æˆ·ä»»åŠ¡"},{value:"approval",label:"å®¡æ‰¹èŠ‚ç‚¹"},{value:"review",label:"é€šçŸ¥èŠ‚ç‚¹"},{value:"gateway",label:"ç½‘å…³èŠ‚ç‚¹"}],tip:"å¼€å§‹èŠ‚ç‚¹å’Œç»“æŸèŠ‚ç‚¹æ˜¯å¿…é¡»çš„ï¼Œå®¡æ‰¹èŠ‚ç‚¹æ”¯æŒå¤šäººå®¡æ‰¹"},{key:"description",title:"èŠ‚ç‚¹æè¿°",type:"textarea",placeholder:"è¯·è¾“å…¥èŠ‚ç‚¹çš„è¯¦ç»†æè¿°",tip:"æè¿°èŠ‚ç‚¹çš„å…·ä½“åŠŸèƒ½å’Œæ³¨æ„äº‹é¡¹"}],advancedColumns:[{key:"assignee_type",title:"è´Ÿè´£äººç±»å‹",type:"select",data:[{value:"user",label:"æŒ‡å®šç”¨æˆ·"},{value:"role",label:"æŒ‰è§’è‰²"},{value:"department",label:"æŒ‰éƒ¨é—¨"},{value:"variable",label:"è¡¨å•å˜é‡"},{value:"previous",label:"ä¸Šä¸€å¤„ç†äºº"}],tip:"é€‰æ‹©ä»»åŠ¡çš„è´Ÿè´£äººæŒ‡å®šæ–¹å¼"},{key:"assignee_value",title:"è´Ÿè´£äººå€¼",type:"text",placeholder:"æ ¹æ®è´Ÿè´£äººç±»å‹å¡«å†™ï¼šç”¨æˆ·IDã€è§’è‰²ç¼–ç ã€éƒ¨é—¨ç¼–ç ã€è¡¨å•å­—æ®µåç­‰",tip:"æ ¹æ®é€‰æ‹©çš„è´Ÿè´£äººç±»å‹å¡«å†™å¯¹åº”çš„å€¼"},{key:"required_approvals",title:"éœ€è¦åŒæ„æ•°",type:"number",defaultValue:1,min:1,tip:"éœ€è¦å¤šå°‘äººåŒæ„æ‰èƒ½è¿›å…¥ä¸‹ä¸€èŠ‚ç‚¹ï¼ˆé€‚ç”¨äºå®¡æ‰¹èŠ‚ç‚¹ï¼‰"},{key:"time_limit",title:"æ—¶é—´é™åˆ¶(å°æ—¶)",type:"number",placeholder:"ä»»åŠ¡å¤„ç†æ—¶é—´é™åˆ¶ï¼Œ0è¡¨ç¤ºæ— é™åˆ¶",tip:"è®¾ç½®ä»»åŠ¡å¤„ç†çš„æ—¶é—´é™åˆ¶ï¼Œè¶…æ—¶ä¼šè‡ªåŠ¨æé†’"},{key:"actions",title:"å¯ç”¨æ“ä½œ",type:"checkbox",data:[{value:"submit",label:"æäº¤"},{value:"approve",label:"åŒæ„"},{value:"reject",label:"æ‹’ç»"},{value:"return",label:"é€€å›"},{value:"transfer",label:"è½¬åŠ"}],defaultValue:["approve","reject"],tip:"é€‰æ‹©åœ¨è¯¥èŠ‚ç‚¹å¯æ‰§è¡Œçš„æ“ä½œ"},{key:"form_schema",title:"èŠ‚ç‚¹è¡¨å•",type:"textarea",placeholder:"å¯é…ç½®èŠ‚ç‚¹ä¸“ç”¨çš„è¡¨å•ç»“æ„(JSONæ ¼å¼)",tip:"è‡ªå®šä¹‰è¯¥èŠ‚ç‚¹ä¸“ç”¨çš„è¡¨å•å­—æ®µå’Œå¸ƒå±€"}]},table1:{action:"admin/bpmn/definition/sys/getList",rightBtns:[{mode:"detail_auto",title:"è¯¦ç»†",show:function(t){return e.$hasRole("admin")||e.$hasPermission("bpmn-workflow-view")}},{mode:"update",title:"ç¼–è¾‘",show:function(t){return e.$hasRole("admin")||e.$hasPermission("bpmn-workflow-edit")}},{mode:"delete",title:"åˆ é™¤",show:function(t){return e.$hasRole("admin")||e.$hasPermission("bpmn-workflow-delete")}}],columns:[{key:"name",title:"æµç¨‹åç§°",type:"text",width:200},{key:"key",title:"æµç¨‹KEY",type:"text",width:200},{key:"nodes",title:"èŠ‚ç‚¹æ•°é‡",type:"text",width:200,formatter:function(e){return e&&e.length?"".concat(e.length,"ä¸ª"):"0ä¸ª"}},{key:"category_name",title:"æµç¨‹åˆ†ç±»",type:"text",width:200,formatter:function(e,t,a,n){return t.category_name="".concat(t.categorys11[0].categorys1[0].category_name,"/").concat(t.categorys11[0].category_name)}},{key:"status",title:"çŠ¶æ€",type:"tag",width:200,data:[{value:"draft",label:"è‰ç¨¿",type:"info"},{value:"active",label:"å·²å‘å¸ƒ",type:"success"},{value:"inactive",label:"å·²åœç”¨",type:"danger"}]},{key:"tags",title:"æ ‡ç­¾",type:"tags",width:200},{key:"version",title:"ç‰ˆæœ¬",type:"number",width:200,show:["detail"]},{key:"_add_time",title:"åˆ›å»ºæ—¶é—´",type:"time",width:200}],multipleSelection:[],selectItem:""},queryForm1:{formData:{},columns:[{key:"name",title:"æµç¨‹åç§°",type:"text",mode:"%%"},{key:"key",title:"æµç¨‹KEY",type:"text",mode:"%%"},{key:"category_id",title:"æµç¨‹åˆ†ç±»",type:"cascader",placeholder:"è¯·é€‰æ‹©æµç¨‹åˆ†ç±»",action:"admin/bpmn/category/sys/getList",props:{list:"rows",value:"category_id",label:"category_name",checkStrictly:!0,emitPath:!1},showAll:!0,mode:"="},{key:"status",title:"çŠ¶æ€",type:"select",mode:"=",data:[{value:"draft",label:"è‰ç¨¿"},{value:"active",label:"å·²å‘å¸ƒ"},{value:"inactive",label:"å·²åœç”¨"}]}]},form1:{data:{status:"draft",version:1,nodes:[]},props:{action:"",columns:[{key:"name",title:"æµç¨‹åç§°",type:"text",rules:[{required:!0,message:"è¯·è¾“å…¥æµç¨‹åç§°"}],tip:"æµç¨‹çš„æ˜¾ç¤ºåç§°ï¼Œä¾¿äºè¯†åˆ«å’Œç®¡ç†"},{key:"key",title:"æµç¨‹KEY",type:"text",rules:[{required:!0,message:"è¯·è¾“å…¥æµç¨‹KEY"}],tip:"æµç¨‹çš„å”¯ä¸€æ ‡è¯†ï¼Œå»ºè®®ä½¿ç”¨è‹±æ–‡ï¼Œå¦‚ï¼šleave_approval"},{key:"category_id",title:"æµç¨‹åˆ†ç±»",type:"tree-select",action:"admin/bpmn/category/sys/getList",props:{list:"rows",value:"category_id",label:"category_name",children:"children"},tip:"é€‰æ‹©æµç¨‹æ‰€å±çš„ä¸šåŠ¡åˆ†ç±»ï¼Œä¾¿äºç®¡ç†"},{key:"version",title:"ç‰ˆæœ¬å·",type:"number",disabled:!0,tip:"ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„ç‰ˆæœ¬å·ï¼Œæ¯æ¬¡å‘å¸ƒæ–°ç‰ˆæœ¬ä¼šè‡ªåŠ¨é€’å¢"},{key:"description",title:"æµç¨‹æè¿°",type:"textarea",tip:"è¯¦ç»†æè¿°æµç¨‹çš„ç”¨é€”å’Œä¸šåŠ¡åœºæ™¯"},{key:"nodes",title:"æµç¨‹èŠ‚ç‚¹",type:"custom",rules:[{validator:this.validateNodes,message:"è¯·è‡³å°‘é…ç½®å¼€å§‹å’Œç»“æŸèŠ‚ç‚¹",trigger:["blur","change"]}]},{key:"status",title:"çŠ¶æ€",type:"radio",data:[{value:"draft",label:"è‰ç¨¿"},{value:"active",label:"å·²å‘å¸ƒ"},{value:"inactive",label:"å·²åœç”¨"}],tip:"è‰ç¨¿çŠ¶æ€å¯ç”¨äºæµ‹è¯•ï¼Œå‘å¸ƒåæµç¨‹æ‰èƒ½æ­£å¼ä½¿ç”¨"},{key:"tags",title:"æ ‡ç­¾",type:"select",multiple:!0,data:[{value:"é‡è¦",label:"é‡è¦"},{value:"æ—¥å¸¸",label:"æ—¥å¸¸"},{value:"ç´§æ€¥",label:"ç´§æ€¥"},{value:"è´¢åŠ¡",label:"è´¢åŠ¡"},{value:"äººäº‹",label:"äººäº‹"},{value:"è¡Œæ”¿",label:"è¡Œæ”¿"}],tip:"ä¸ºæµç¨‹æ·»åŠ æ ‡ç­¾ï¼Œä¾¿äºç­›é€‰å’ŒæŸ¥æ‰¾"}],rules:{name:[{required:!0,message:"æµç¨‹åç§°ä¸èƒ½ä¸ºç©º",trigger:["blur","change"]}],key:[{required:!0,message:"æµç¨‹KEYä¸èƒ½ä¸ºç©º",trigger:["blur","change"]}],category_id:[{required:!0,message:"æµç¨‹åˆ†ç±»ä¸èƒ½ä¸ºç©º",trigger:["blur","change"]}]},formType:"",title:"",show:!1}}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l=this.vk,this.options=e,this.init(e)},computed:{availableNextNodes:function(){var e=this;return this.form1.data.nodes?this.form1.data.nodes.filter((function(t){return t.node_key!==e.connectionDialog.currentNode.node_key&&"start"!==t.node_type})):[]},startNodeCount:function(){return this.form1.data.nodes?this.form1.data.nodes.filter((function(e){return"start"===e.node_type})).length:0},endNodeCount:function(){return this.form1.data.nodes?this.form1.data.nodes.filter((function(e){return"end"===e.node_type})).length:0},taskNodeCount:function(){if(!this.form1.data.nodes)return 0;var e=["userTask","approval","review"];return this.form1.data.nodes.filter((function(t){return e.includes(t.node_type)})).length}},methods:{init:function(e){var t=this;return(0,d.default)((0,s.default)().mark((function e(){return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r["form1"]=l.pubfn.copyObject(t.form1),e.next=3,t.loadConditionRules();case 3:case"end":return e.stop()}}),e)})))()},loadConditionRules:function(){var e=this;return(0,d.default)((0,s.default)().mark((function t(){var a;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.callFunction({url:"admin/bpmn/condition-rule/sys/getList",title:"è¯·æ±‚ä¸­...",data:{}});case 3:a=t.sent,0===a.code&&(e.conditionRules=a.rows),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("åŠ è½½æ¡ä»¶è§„åˆ™å¤±è´¥:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},search:function(){this.$refs.table1.search()},refresh:function(){this.$refs.table1.refresh()},currentChange:function(e){this.table1.selectItem=e},selectionChange:function(e){this.table1.multipleSelection=e},addBtn:function(){this.resetForm(),this.form1.props.action="admin/bpmn/definition/sys/add",this.form1.props.formType="add",this.form1.props.title="æ·»åŠ æµç¨‹å®šä¹‰",this.form1.props.show=!0,this.form1.data.nodes||(this.form1.data.nodes=[])},resetForm:function(){l.pubfn.resetForm(r,this)},updateBtn:function(e){var t=e.item;this.form1.props.action="admin/bpmn/definition/sys/update",this.form1.props.formType="update",this.form1.props.title="ç¼–è¾‘æµç¨‹å®šä¹‰",this.form1.props.show=!0,this.$set(this.form1,"data",l.pubfn.copyObject(t)),this.form1.data.nodes||this.$set(this.form1.data,"nodes",[])},deleteBtn:function(e){var t=e.item,a=e.deleteFn;a({action:"admin/bpmn/definition/sys/delete",data:{_id:t._id}})},publishBtn:function(){var e=this;return(0,d.default)((0,s.default)().mark((function t(){return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.table1.selectItem){t.next=3;break}return l.toast("è¯·é€‰æ‹©è¦å‘å¸ƒçš„æµç¨‹"),t.abrupt("return");case 3:return t.prev=3,t.next=6,l.callFunction({url:"admin/bpmn/definition/sys/update",title:"å‘å¸ƒä¸­...",data:{_id:e.table1.selectItem._id,status:"active"}});case 6:l.toast("å‘å¸ƒæˆåŠŸ"),e.refresh(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),l.toast("å‘å¸ƒå¤±è´¥");case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},disableBtn:function(){var e=this;return(0,d.default)((0,s.default)().mark((function t(){return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.table1.selectItem){t.next=3;break}return l.toast("è¯·é€‰æ‹©è¦åœç”¨çš„æµç¨‹"),t.abrupt("return");case 3:return t.prev=3,t.next=6,l.callFunction({url:"admin/bpmn/definition/sys/update",title:"åœç”¨ä¸­...",data:{_id:e.table1.selectItem._id,status:"inactive"}});case 6:l.toast("åœç”¨æˆåŠŸ"),e.refresh(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),l.toast("åœç”¨å¤±è´¥");case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},batchBtn:function(e){var t=this;return(0,d.default)((0,s.default)().mark((function a(){var n,i;return(0,s.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==t.table1.multipleSelection.length){a.next=3;break}return l.toast("è¯·é€‰æ‹©è¦æ“ä½œçš„æµç¨‹"),a.abrupt("return");case 3:n=t.table1.multipleSelection.map((function(e){return e._id})),i="",a.t0=e,a.next=1===a.t0?8:2===a.t0?10:12;break;case 8:return i="active",a.abrupt("break",13);case 10:return i="inactive",a.abrupt("break",13);case 12:return a.abrupt("return");case 13:return a.prev=13,a.next=16,l.callFunction({url:"admin/bpmn/definition/sys/update",title:"æ‰¹é‡æ“ä½œä¸­...",data:{ids:n,status:i}});case 16:l.toast("æ“ä½œæˆåŠŸ"),t.refresh(),a.next=23;break;case 20:a.prev=20,a.t1=a["catch"](13),l.toast("æ“ä½œå¤±è´¥");case 23:case"end":return a.stop()}}),a,null,[[13,20]])})))()},addNode:function(){this.nodeDialog.data={node_key:"",node_name:"",node_type:"userTask",description:"",assignee_type:"user",assignee_value:"",required_approvals:1,time_limit:0,actions:["approve","reject"],form_schema:"",next_nodes:[]},this.nodeDialog.title="æ·»åŠ èŠ‚ç‚¹",this.nodeDialog.editingIndex=-1,this.nodeDialog.activeTab="basic",this.nodeDialog.show=!0},editNode:function(e){this.nodeDialog.data=l.pubfn.copyObject(this.form1.data.nodes[e]),this.nodeDialog.title="ç¼–è¾‘èŠ‚ç‚¹",this.nodeDialog.editingIndex=e,this.nodeDialog.activeTab="basic",this.nodeDialog.show=!0},editNodeConnections:function(e){var t=this.form1.data.nodes[e];this.connectionDialog.currentNode=t,this.connectionDialog.currentNodeIndex=e,this.connectionDialog.title="é…ç½®èŠ‚ç‚¹è¿æ¥ - ".concat(t.node_name),this.connectionDialog.connections=t.next_nodes?l.pubfn.copyObject(t.next_nodes):[],this.connectionDialog.show=!0},removeNode:function(e){var t=this;this.$confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹å—ï¼Ÿåˆ é™¤åè¯¥èŠ‚ç‚¹çš„æ‰€æœ‰è¿æ¥å…³ç³»ä¹Ÿä¼šè¢«æ¸…é™¤ã€‚","æç¤º",{type:"warning"}).then((function(){t.form1.data.nodes.splice(e,1),t.$forceUpdate(),l.toast("èŠ‚ç‚¹åˆ é™¤æˆåŠŸ")})).catch((function(){}))},saveNode:function(){var e=this;if(this.form1.data.nodes||this.$set(this.form1.data,"nodes",[]),this.nodeDialog.data.node_key)if(this.nodeDialog.data.node_name){if(-1===this.nodeDialog.editingIndex){var t=this.form1.data.nodes.some((function(t){return t.node_key===e.nodeDialog.data.node_key}));if(t)return void l.toast("èŠ‚ç‚¹KEYå·²å­˜åœ¨ï¼Œè¯·é‡æ–°è¾“å…¥")}var a=l.pubfn.copyObject(this.nodeDialog.data);-1===this.nodeDialog.editingIndex?this.form1.data.nodes.push(a):this.$set(this.form1.data.nodes,this.nodeDialog.editingIndex,a),this.nodeDialog.show=!1,l.toast("ä¿å­˜æˆåŠŸ")}else l.toast("è¯·è¾“å…¥èŠ‚ç‚¹åç§°");else l.toast("è¯·è¾“å…¥èŠ‚ç‚¹KEY")},addConnection:function(){this.connectionDialog.connections.push({node_key:"",condition_rule_code:"",default_path:!1})},removeConnection:function(e){this.connectionDialog.connections.splice(e,1)},saveConnections:function(){var e=this,t=this.connectionDialog.connections,a=t.some((function(e){return!e.node_key}));if(a)l.toast("è¯·ä¸ºæ‰€æœ‰è¿æ¥é€‰æ‹©ä¸‹ä¸€èŠ‚ç‚¹");else{var n=this.form1.data.nodes.map((function(e){return e.node_key})),i=t.some((function(e){return!n.includes(e.node_key)}));if(i)l.toast("é€‰æ‹©çš„ä¸‹ä¸€èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°é€‰æ‹©");else{var o=t.some((function(t){return t.node_key===e.connectionDialog.currentNode.node_key}));o?l.toast("ä¸èƒ½å°†å½“å‰èŠ‚ç‚¹è®¾ç½®ä¸ºè‡ªå·±çš„ä¸‹ä¸€èŠ‚ç‚¹"):(this.$set(this.form1.data.nodes[this.connectionDialog.currentNodeIndex],"next_nodes",l.pubfn.copyObject(t)),this.connectionDialog.show=!1,l.toast("è¿æ¥é…ç½®ä¿å­˜æˆåŠŸ"))}}},validateNodes:function(e,t,a){if(t&&0!==t.length){var n=t.some((function(e){return"start"===e.node_type})),s=t.some((function(e){return"end"===e.node_type}));if(n)if(s){var d=t.map((function(e){return e.node_key})),l=(0,o.default)(new Set(d));if(d.length===l.length){var r=t.find((function(e){return"start"===e.node_type}));if(!r||r.next_nodes&&0!==r.next_nodes.length){var c,u=t.filter((function(e){return"end"===e.node_type})),f=(0,i.default)(u);try{for(f.s();!(c=f.n()).done;){var p=c.value;if(p.next_nodes&&p.next_nodes.length>0)return void a(new Error("ç»“æŸèŠ‚ç‚¹ä¸èƒ½æœ‰ä¸‹ä¸€èŠ‚ç‚¹"))}}catch(v){f.e(v)}finally{f.f()}a()}else a(new Error("å¼€å§‹èŠ‚ç‚¹å¿…é¡»é…ç½®ä¸‹ä¸€èŠ‚ç‚¹"))}else a(new Error("èŠ‚ç‚¹KEYä¸èƒ½é‡å¤"))}else a(new Error("å¿…é¡»åŒ…å«ä¸€ä¸ªç»“æŸèŠ‚ç‚¹"));else a(new Error("å¿…é¡»åŒ…å«ä¸€ä¸ªå¼€å§‹èŠ‚ç‚¹"))}else a(new Error("è¯·è‡³å°‘é…ç½®ä¸€ä¸ªèŠ‚ç‚¹"))},getNodeTypeText:function(e){return{start:"å¼€å§‹",end:"ç»“æŸ",userTask:"ç”¨æˆ·ä»»åŠ¡",approval:"å®¡æ‰¹",review:"é€šçŸ¥",gateway:"ç½‘å…³"}[e]||e},getAssigneeText:function(e){var t={user:"ç”¨æˆ·: ".concat(e.assignee_value),role:"è§’è‰²: ".concat(e.assignee_value),department:"éƒ¨é—¨: ".concat(e.assignee_value),variable:"å˜é‡: ".concat(e.assignee_value),previous:"ä¸Šä¸€å¤„ç†äºº"};return t[e.assignee_type]||"æœªæŒ‡å®š"},getNodeName:function(e){var t=this.form1.data.nodes.find((function(t){return t.node_key===e}));return t?t.node_name:e},getActionText:function(e){return{submit:"æäº¤",approve:"åŒæ„",reject:"æ‹’ç»",return:"é€€å›",transfer:"è½¬åŠ"}[e]||e},validateNodeDesign:function(){this.validateNodes(null,this.form1.data.nodes,(function(e){e?l.toast(e.message):l.toast("èŠ‚ç‚¹è®¾è®¡éªŒè¯é€šè¿‡")}))},showDesignHelp:function(){this.$alert('<div style="line-height: 1.6;">\n\t\t\t\t\t<h3>æµç¨‹èŠ‚ç‚¹è®¾è®¡æŒ‡å—</h3>\n\t\t\t\t\t<p><strong>å¼€å§‹èŠ‚ç‚¹ï¼š</strong>æ¯ä¸ªæµç¨‹å¿…é¡»ä¸”åªèƒ½æœ‰ä¸€ä¸ªå¼€å§‹èŠ‚ç‚¹</p>\n\t\t\t\t\t<p><strong>ç»“æŸèŠ‚ç‚¹ï¼š</strong>æ¯ä¸ªæµç¨‹è‡³å°‘éœ€è¦ä¸€ä¸ªç»“æŸèŠ‚ç‚¹</p>\n\t\t\t\t\t<p><strong>ä»»åŠ¡èŠ‚ç‚¹ï¼š</strong>ç”¨æˆ·éœ€è¦å¤„ç†çš„å…·ä½“ä»»åŠ¡</p>\n\t\t\t\t\t<p><strong>å®¡æ‰¹èŠ‚ç‚¹ï¼š</strong>æ”¯æŒå¤šäººå®¡æ‰¹ï¼Œå¯è®¾ç½®éœ€è¦åŒæ„çš„äººæ•°</p>\n\t\t\t\t\t<p><strong>é€šçŸ¥èŠ‚ç‚¹ï¼š</strong>é€šçŸ¥çŸ¥æ‚‰ï¼Œæ— éœ€å®¡æ‰¹æ“ä½œï¼Œä»…ç”¨äºé€šçŸ¥å’Œç¡®è®¤</p>\n\t\t\t\t\t<p><strong>ç½‘å…³èŠ‚ç‚¹ï¼š</strong>ç”¨äºå®ç°æ¡ä»¶åˆ†æ”¯å’Œå¹¶è¡Œå¤„ç†</p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<p><strong>è®¾è®¡å»ºè®®ï¼š</strong></p>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>ä¸ºæ¯ä¸ªèŠ‚ç‚¹è®¾ç½®æ¸…æ™°çš„åç§°å’Œæè¿°</li>\n\t\t\t\t\t\t<li>åˆç†è®¾ç½®è´Ÿè´£äººå’Œå®¡æ‰¹è§„åˆ™</li>\n\t\t\t\t\t\t<li>ä½¿ç”¨æ¡ä»¶åˆ†æ”¯å¤„ç†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘</li>\n\t\t\t\t\t\t<li>æµ‹è¯•æµç¨‹ç¡®ä¿æµè½¬è·¯å¾„æ­£ç¡®</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<br>\n\t\t\t\t\t<h3>æ“ä½œç±»å‹è®¾è®¡æŒ‡å—</h3>\n\t\t\t\t\t<p><strong>approve (åŒæ„/é€šè¿‡)ï¼š</strong>åŒæ„å½“å‰ç”³è¯·ï¼Œæ¨è¿›åˆ°ä¸‹ä¸€èŠ‚ç‚¹</p>\n\t\t\t\t\t<p><strong>reject (æ‹’ç»)ï¼š</strong>æ‹’ç»å½“å‰ç”³è¯·ï¼Œç»“æŸæµç¨‹</p>\n\t\t\t\t\t<p><strong>return (é€€å›)ï¼š</strong>å°†ç”³è¯·é€€å›åˆ°æŒ‡å®šèŠ‚ç‚¹ï¼ˆé€šå¸¸æ˜¯ç”³è¯·äººï¼‰</p>\n\t\t\t\t    <p><strong>transfer (è½¬äº¤)ï¼š</strong>å°†å½“å‰ä»»åŠ¡è½¬äº¤ç»™å…¶ä»–ç”¨æˆ·å¤„ç†</p>\n\t\t\t\t\t<p><strong>delegate (å§”æ‰˜)ï¼š</strong>å°†ä»»åŠ¡å§”æ‰˜ç»™ä»–äººï¼Œä½†ä¿ç•™æœ€ç»ˆç¡®è®¤æƒ</p>\t\n\t\t\t\t\t<p><strong>confirm (ç¡®è®¤/çŸ¥æ‚‰)ï¼š</strong>ç®€å•çš„ç¡®è®¤æ“ä½œï¼Œä¸»è¦ç”¨äºé˜…çŸ¥èŠ‚ç‚¹</p>\t\t\n\t\t\t\t\t<p><strong>resubmit (é‡æ–°æäº¤)ï¼š</strong>è¢«é€€å›åé‡æ–°æäº¤ç”³è¯·</p>\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t</div>',"è®¾è®¡å¸®åŠ©",{dangerouslyUseHTMLString:!0,confirmButtonText:"çŸ¥é“äº†"})}}};t.default=c},"970da":function(e,t,a){var n=a("d7fd");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("967d").default;i("1e8676a8",n,!0,{sourceMap:!1,shadowMode:!1})},ba8a:function(e,t,a){"use strict";a.r(t);var n=a("d0a8"),i=a("c2e1");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("6fa5"),a("dfd1");var s=a("828b"),d=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"a9dfe76e",null,!1,n["a"],void 0);t["default"]=d.exports},c2e1:function(e,t,a){"use strict";a.r(t);var n=a("95ab"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},d0a8:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page-body"},[a("vk-data-table-query",{attrs:{columns:e.queryForm1.columns},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)}},model:{value:e.queryForm1.formData,callback:function(t){e.$set(e.queryForm1,"formData",t)},expression:"queryForm1.formData"}}),a("v-uni-view",{staticClass:"action-bar"},[a("el-row",[e.$hasRole("admin")||e.$hasPermission("bpmn-workflow-add")?a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addBtn.apply(void 0,arguments)}}},[e._v("æ·»åŠ æµç¨‹")]):e._e(),e.$hasRole("admin")||e.$hasPermission("bpmn-workflow-add")?a("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-video-play",disabled:!e.table1.selectItem},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.publishBtn.apply(void 0,arguments)}}},[e._v("å‘å¸ƒ")]):e._e(),e.$hasRole("admin")||e.$hasPermission("bpmn-workflow-add")?a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-switch-button",disabled:!e.table1.selectItem},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.disableBtn.apply(void 0,arguments)}}},[e._v("åœç”¨")]):e._e(),e.table1.multipleSelection&&(e.$hasRole("admin")||e.$hasPermission("bpmn-workflow-add"))?a("el-dropdown",{attrs:{"split-button":!1,trigger:"click"},on:{command:function(t){arguments[0]=t=e.$handleEvent(t),e.batchBtn.apply(void 0,arguments)}}},[a("el-button",{staticStyle:{"margin-left":"20rpx"},attrs:{type:"danger",size:"small",disabled:0===e.table1.multipleSelection.length}},[e._v(" æ‰¹é‡æ“ä½œ"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:1}},[e._v("æ‰¹é‡å‘å¸ƒ")]),a("el-dropdown-item",{attrs:{command:2}},[e._v("æ‰¹é‡åœç”¨")])],1)],1):e._e()],1)],1),a("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,"right-btns":e.table1.rightBtns,selection:!0,"row-no":!1,pagination:!0},on:{update:function(t){arguments[0]=t=e.$handleEvent(t),e.updateBtn.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}}),a("vk-data-dialog",{attrs:{title:e.form1.props.title,width:"1000px",mode:"form","close-on-click-modal":!1,"custom-class":"process-definition-dialog"},model:{value:e.form1.props.show,callback:function(t){e.$set(e.form1.props,"show",t)},expression:"form1.props.show"}},[a("vk-data-form",{attrs:{rules:e.form1.props.rules,action:e.form1.props.action,"form-type":e.form1.props.formType,columns:e.form1.props.columns,"label-width":"140px"},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.form1.props.show=!1,e.refresh()}},scopedSlots:e._u([{key:"before",fn:function(){return[a("v-uni-view",{staticClass:"form-section"},[a("v-uni-view",{staticClass:"section-header"},[a("v-uni-text",{staticClass:"section-title"},[e._v("åŸºç¡€ä¿¡æ¯")]),a("v-uni-text",{staticClass:"section-desc"},[e._v("å¡«å†™æµç¨‹çš„åŸºæœ¬ä¿¡æ¯å’Œåˆ†ç±»")])],1)],1)]},proxy:!0},{key:"nodes",fn:function(t){return[a("v-uni-view",{staticClass:"form-section"},[a("v-uni-view",{staticClass:"section-header"},[a("v-uni-text",{staticClass:"section-title"},[e._v("æµç¨‹èŠ‚ç‚¹è®¾è®¡")]),a("v-uni-text",{staticClass:"section-desc"},[e._v("è®¾è®¡æµç¨‹çš„èŠ‚ç‚¹å’Œæµè½¬è·¯å¾„")])],1),a("v-uni-view",{staticClass:"node-designer"},[a("v-uni-view",{staticClass:"designer-toolbar"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addNode.apply(void 0,arguments)}}},[e._v("æ·»åŠ èŠ‚ç‚¹")]),a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-s-operation"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.validateNodeDesign.apply(void 0,arguments)}}},[e._v("éªŒè¯è®¾è®¡")]),a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-question"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showDesignHelp.apply(void 0,arguments)}}},[e._v("è®¾è®¡å¸®åŠ©")])],1),e.form1.data.nodes&&e.form1.data.nodes.length>0?a("v-uni-view",{staticClass:"node-stats"},[a("v-uni-view",{staticClass:"stat-item"},[a("v-uni-text",{staticClass:"stat-label"},[e._v("èŠ‚ç‚¹æ€»æ•°:")]),a("v-uni-text",{staticClass:"stat-value"},[e._v(e._s(e.form1.data.nodes.length))])],1),a("v-uni-view",{staticClass:"stat-item"},[a("v-uni-text",{staticClass:"stat-label"},[e._v("å¼€å§‹èŠ‚ç‚¹:")]),a("v-uni-text",{staticClass:"stat-value"},[e._v(e._s(e.startNodeCount))])],1),a("v-uni-view",{staticClass:"stat-item"},[a("v-uni-text",{staticClass:"stat-label"},[e._v("ç»“æŸèŠ‚ç‚¹:")]),a("v-uni-text",{staticClass:"stat-value"},[e._v(e._s(e.endNodeCount))])],1),a("v-uni-view",{staticClass:"stat-item"},[a("v-uni-text",{staticClass:"stat-label"},[e._v("ä»»åŠ¡èŠ‚ç‚¹:")]),a("v-uni-text",{staticClass:"stat-value"},[e._v(e._s(e.taskNodeCount))])],1)],1):e._e(),a("v-uni-view",{staticClass:"nodes-container"},[e.form1.data.nodes&&0!==e.form1.data.nodes.length?e._e():a("v-uni-view",{staticClass:"empty-nodes"},[a("v-uni-image",{staticClass:"empty-image",attrs:{src:"/static/images/empty-process.png",mode:"aspectFit"}}),a("v-uni-text",{staticClass:"empty-title"},[e._v("æš‚æ— æµç¨‹èŠ‚ç‚¹")]),a("v-uni-text",{staticClass:"empty-desc"},[e._v('ç‚¹å‡»"æ·»åŠ èŠ‚ç‚¹"å¼€å§‹è®¾è®¡æ‚¨çš„ä¸šåŠ¡æµç¨‹')])],1),e._l(e.form1.data.nodes,(function(t,n){return a("v-uni-view",{key:n,staticClass:"node-item",class:"node-"+t.node_type},[a("v-uni-view",{staticClass:"node-header"},[a("v-uni-view",{staticClass:"node-badge"},[a("v-uni-text",{staticClass:"node-index"},[e._v(e._s(n+1))])],1),a("v-uni-view",{staticClass:"node-info"},[a("v-uni-text",{staticClass:"node-name"},[e._v(e._s(t.node_name))]),a("v-uni-text",{staticClass:"node-key"},[e._v(e._s(t.node_key))])],1),a("v-uni-view",{staticClass:"node-type-tag"},[a("v-uni-text",[e._v(e._s(e.getNodeTypeText(t.node_type)))])],1)],1),a("v-uni-view",{staticClass:"node-content"},[t.assignee_type?a("v-uni-view",{staticClass:"node-field"},[a("v-uni-text",{staticClass:"field-label"},[e._v("è´Ÿè´£äºº:")]),a("v-uni-text",{staticClass:"field-value"},[e._v(e._s(e.getAssigneeText(t)))])],1):e._e(),t.required_approvals?a("v-uni-view",{staticClass:"node-field"},[a("v-uni-text",{staticClass:"field-label"},[e._v("éœ€è¦åŒæ„:")]),a("v-uni-text",{staticClass:"field-value"},[e._v(e._s(t.required_approvals)+"äºº")])],1):e._e(),t.time_limit?a("v-uni-view",{staticClass:"node-field"},[a("v-uni-text",{staticClass:"field-label"},[e._v("æ—¶é—´é™åˆ¶:")]),a("v-uni-text",{staticClass:"field-value"},[e._v(e._s(t.time_limit)+"å°æ—¶")])],1):e._e(),t.actions&&t.actions.length>0?a("v-uni-view",{staticClass:"node-field"},[a("v-uni-text",{staticClass:"field-label"},[e._v("å¯ç”¨æ“ä½œ:")]),a("v-uni-view",{staticClass:"actions-tags"},e._l(t.actions,(function(t,n){return a("v-uni-text",{key:n,staticClass:"action-tag"},[e._v(" "+e._s(e.getActionText(t))+" ")])})),1)],1):e._e(),t.next_nodes&&t.next_nodes.length>0?a("v-uni-view",{staticClass:"next-nodes"},[a("v-uni-text",{staticClass:"next-label"},[e._v("ä¸‹ä¸€èŠ‚ç‚¹:")]),a("v-uni-view",{staticClass:"next-nodes-list"},e._l(t.next_nodes,(function(t,n){return a("v-uni-text",{key:n,staticClass:"next-node-item"},[e._v(" "+e._s(e.getNodeName(t.node_key))+" "),t.condition_rule_code?a("span",{staticClass:"condition-tag"},[e._v("æ¡ä»¶")]):e._e(),t.default_path?a("span",{staticClass:"default-tag"},[e._v("é»˜è®¤")]):e._e()])})),1)],1):e._e()],1),a("v-uni-view",{staticClass:"node-actions"},[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.editNode(n)}}},[e._v("ç¼–è¾‘")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-connection",type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.editNodeConnections(n)}}},[e._v("è¿æ¥")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.removeNode(n)}}},[e._v("åˆ é™¤")])],1)],1)}))],2),e.form1.data.nodes&&e.form1.data.nodes.length>0?a("v-uni-view",{staticClass:"design-tips"},[a("v-uni-view",{staticClass:"tips-header"},[a("v-uni-text",{staticClass:"tips-title"},[e._v("è®¾è®¡æç¤º")])],1),a("ul",{staticClass:"tips-list"},[a("li",[e._v("æ¯ä¸ªæµç¨‹å¿…é¡»åŒ…å«ä¸”åªèƒ½åŒ…å«ä¸€ä¸ªå¼€å§‹èŠ‚ç‚¹")]),a("li",[e._v("æµç¨‹å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªç»“æŸèŠ‚ç‚¹")]),a("li",[e._v('ç‚¹å‡»"è¿æ¥"æŒ‰é’®é…ç½®èŠ‚ç‚¹ä¹‹é—´çš„æµè½¬å…³ç³»')]),a("li",[e._v("å¯ä»¥ä¸ºèŠ‚ç‚¹è®¾ç½®æ¡ä»¶åˆ†æ”¯å®ç°å¤æ‚æµç¨‹")])])],1):e._e()],1)],1)]}}]),model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1),a("vk-data-dialog",{attrs:{title:e.nodeDialog.title,width:"800px","close-on-click-modal":!1},scopedSlots:e._u([{key:"footer",fn:function(t){var n=t.close;return[a("el-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),n.apply(void 0,arguments)}}},[e._v("å– æ¶ˆ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.saveNode.apply(void 0,arguments)}}},[e._v("ç¡® å®š")])]}}]),model:{value:e.nodeDialog.show,callback:function(t){e.$set(e.nodeDialog,"show",t)},expression:"nodeDialog.show"}},[a("v-uni-view",{staticClass:"node-form-dialog"},[a("v-uni-view",{staticClass:"form-tabs"},[a("el-tabs",{model:{value:e.nodeDialog.activeTab,callback:function(t){e.$set(e.nodeDialog,"activeTab",t)},expression:"nodeDialog.activeTab"}},[a("el-tab-pane",{attrs:{label:"åŸºæœ¬ä¿¡æ¯",name:"basic"}},[a("vk-data-form",{attrs:{rules:e.nodeDialog.rules,columns:e.nodeDialog.basicColumns,"label-width":"140px","footer-show":!1},model:{value:e.nodeDialog.data,callback:function(t){e.$set(e.nodeDialog,"data",t)},expression:"nodeDialog.data"}})],1),a("el-tab-pane",{attrs:{label:"é«˜çº§è®¾ç½®",name:"advanced"}},[a("vk-data-form",{attrs:{rules:e.nodeDialog.rules,columns:e.nodeDialog.advancedColumns,"label-width":"140px","footer-show":!1},model:{value:e.nodeDialog.data,callback:function(t){e.$set(e.nodeDialog,"data",t)},expression:"nodeDialog.data"}})],1)],1)],1)],1)],1),a("vk-data-dialog",{attrs:{title:e.connectionDialog.title,width:"900px","close-on-click-modal":!1},scopedSlots:e._u([{key:"footer",fn:function(t){var n=t.close;return[a("el-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),n.apply(void 0,arguments)}}},[e._v("å– æ¶ˆ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.saveConnections.apply(void 0,arguments)}}},[e._v("ä¿ å­˜")])]}}]),model:{value:e.connectionDialog.show,callback:function(t){e.$set(e.connectionDialog,"show",t)},expression:"connectionDialog.show"}},[a("v-uni-view",{staticClass:"connection-dialog"},[a("v-uni-view",{staticClass:"current-node-info"},[a("v-uni-view",{staticClass:"current-node-card"},[a("v-uni-text",{staticClass:"card-label"},[e._v("å½“å‰èŠ‚ç‚¹")]),a("v-uni-text",{staticClass:"node-name"},[e._v(e._s(e.connectionDialog.currentNode.node_name))]),a("v-uni-text",{staticClass:"node-key"},[e._v(e._s(e.connectionDialog.currentNode.node_key))]),a("v-uni-text",{staticClass:"node-type"},[e._v(e._s(e.getNodeTypeText(e.connectionDialog.currentNode.node_type)))])],1)],1),a("v-uni-view",{staticClass:"connections-section"},[a("v-uni-view",{staticClass:"section-header"},[a("v-uni-text",{staticClass:"section-title"},[e._v("æµè½¬è·¯å¾„é…ç½®")]),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addConnection.apply(void 0,arguments)}}},[e._v(" æ·»åŠ è·¯å¾„ ")])],1),a("v-uni-view",{staticClass:"connections-list"},[0===e.connectionDialog.connections.length?a("v-uni-view",{staticClass:"empty-connections"},[a("v-uni-text",{staticClass:"empty-text"},[e._v('æš‚æ— æµè½¬è·¯å¾„ï¼Œç‚¹å‡»"æ·»åŠ è·¯å¾„"è¿›è¡Œé…ç½®')])],1):e._e(),e._l(e.connectionDialog.connections,(function(t,n){return a("v-uni-view",{key:n,staticClass:"connection-item"},[a("v-uni-view",{staticClass:"connection-header"},[a("v-uni-text",{staticClass:"connection-title"},[e._v("è·¯å¾„ "+e._s(n+1))]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",plain:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.removeConnection(n)}}},[e._v(" åˆ é™¤ ")])],1),a("v-uni-view",{staticClass:"connection-form"},[a("v-uni-view",{staticClass:"form-row"},[a("v-uni-view",{staticClass:"form-field"},[a("v-uni-text",{staticClass:"field-label"},[e._v("ä¸‹ä¸€èŠ‚ç‚¹")]),a("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©ä¸‹ä¸€èŠ‚ç‚¹",size:"small"},model:{value:t.node_key,callback:function(a){e.$set(t,"node_key",a)},expression:"connection.node_key"}},e._l(e.availableNextNodes,(function(e){return a("el-option",{key:e.node_key,attrs:{label:e.node_name+" ("+e.node_key+")",value:e.node_key}})})),1)],1),a("v-uni-view",{staticClass:"form-field"},[a("v-uni-text",{staticClass:"field-label"},[e._v("æ¡ä»¶è§„åˆ™")]),a("el-select",{attrs:{placeholder:"é€‰æ‹©æ¡ä»¶è§„åˆ™(å¯é€‰)",size:"small"},model:{value:t.condition_rule_code,callback:function(a){e.$set(t,"condition_rule_code",a)},expression:"connection.condition_rule_code"}},[a("el-option",{attrs:{label:"æ— æ¡ä»¶",value:""}}),e._l(e.conditionRules,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],2)],1)],1),a("v-uni-view",{staticClass:"form-row"},[a("el-checkbox",{model:{value:t.default_path,callback:function(a){e.$set(t,"default_path",a)},expression:"connection.default_path"}},[e._v(" è®¾ä¸ºé»˜è®¤è·¯å¾„ï¼ˆå½“æ²¡æœ‰æ¡ä»¶åŒ¹é…æ—¶ä½¿ç”¨æ­¤è·¯å¾„ï¼‰ ")])],1)],1)],1)}))],2)],1),a("v-uni-view",{staticClass:"connection-guide"},[a("v-uni-view",{staticClass:"guide-header"},[a("v-uni-text",{staticClass:"guide-title"},[e._v("é…ç½®è¯´æ˜")])],1),a("v-uni-view",{staticClass:"guide-content"},[a("v-uni-view",{staticClass:"guide-item"},[a("v-uni-text",{staticClass:"guide-icon"},[e._v("ğŸ’¡")]),a("v-uni-text",{staticClass:"guide-text"},[e._v("å¯ä»¥ä¸ºèŠ‚ç‚¹é…ç½®å¤šä¸ªæµè½¬è·¯å¾„å®ç°æ¡ä»¶åˆ†æ”¯")])],1),a("v-uni-view",{staticClass:"guide-item"},[a("v-uni-text",{staticClass:"guide-icon"},[e._v("âš ï¸")]),a("v-uni-text",{staticClass:"guide-text"},[e._v("ç»“æŸèŠ‚ç‚¹ä¸èƒ½æœ‰ä¸‹ä¸€èŠ‚ç‚¹")])],1),a("v-uni-view",{staticClass:"guide-item"},[a("v-uni-text",{staticClass:"guide-icon"},[e._v("âœ…")]),a("v-uni-text",{staticClass:"guide-text"},[e._v("å»ºè®®ä¸ºæ¯ä¸ªåˆ†æ”¯è®¾ç½®ä¸€ä¸ªé»˜è®¤è·¯å¾„")])],1)],1)],1)],1)],1)],1)},i=[]},d487:function(e,t,a){var n=a("6139");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("967d").default;i("5daabd5d",n,!0,{sourceMap:!1,shadowMode:!1})},d7fd:function(e,t,a){var n=a("c86c");t=n(!1),t.push([e.i,".process-definition-dialog .el-dialog__body[data-v-a9dfe76e]{padding:20px 25px}.process-definition-dialog .vk-data-form-item[data-v-a9dfe76e]{margin-bottom:20px}",""]),e.exports=t},dfd1:function(e,t,a){"use strict";var n=a("970da"),i=a.n(n);i.a}}]);