(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"128a":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a("el-row",{attrs:{gutter:20}},t._l(t.overviewData,(function(e,r){return a("el-col",{key:r,attrs:{span:3}},[a("el-card",{attrs:{shadow:"hover","body-style":{backgroundColor:e.color}}},[a("div",{staticClass:"card-content"},[a("i",{class:e.icon}),a("span",[t._v(t._s(e.title))]),a("h2",[t._v(t._s(e.value))])])])],1)})),1),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"chart-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("各中心人数分布")])]),a("div",{ref:"CenterChart",staticStyle:{height:"200px"}})]),a("el-card",{staticStyle:{"margin-top":"20px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"chart-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("各省人数分布")])]),a("div",{ref:"ProvinceChart",staticStyle:{height:"200px"}})])],1),a("el-col",{attrs:{span:7}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"chart-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("性别分布")])]),a("div",{ref:"genderChart",staticStyle:{height:"200px"}})]),a("el-card",{staticStyle:{"margin-top":"20px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"chart-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("学历分布")])]),a("div",{ref:"educationChart",staticStyle:{height:"200px"}})])],1),a("el-col",{attrs:{span:7}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"chart-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("年龄分布")])]),a("div",{ref:"ageChart",staticStyle:{height:"200px"}})]),a("el-card",{staticStyle:{"margin-top":"20px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"chart-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("合同类型分布")])]),a("div",{ref:"contractChart",staticStyle:{height:"200px"}})])],1)],1)],1)},n=[]},"5d44":function(t,e,a){"use strict";a.r(e);var r=a("6c2e"),n=a.n(r);for(var s in r)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(s);e["default"]=n.a},"6c2e":function(t,e,a){"use strict";a("6a54");var r=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("fd3c"),a("aa9c"),a("bf0f"),a("de6c"),a("2797"),a("dc8a");var n=r(a("2634")),s=r(a("2fdc")),i={data:function(){return{companys:[],overviewData:{zrs:{title:"在职人数",value:"0人",color:"#00a65a",icon:"el-icon-user-solid"},lzry:{title:"离职人数",value:"0人",color:"#f39c12",icon:"el-icon-warning-outline"},yg:{title:"普通员工",value:"0人",color:"#00c0ef",icon:"el-icon-s-promotion"},jcgl:{title:"基层管理",value:"0人",color:"#f56c6c",icon:"el-icon-star-on"},zcgl:{title:"中层管理",value:"0人",color:"#e67e22",icon:"el-icon-trophy"},gg:{title:"高层管理",value:"0人",color:"#d33682",icon:"el-icon-medal-1"},ageAvg:{title:"平均年龄",value:"0年",color:"#00a65a",icon:"el-icon-date"},yearAvg:{title:"平均司龄",value:"0年",color:"#f39c12",icon:"el-icon-time"}}}},mounted:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getCompanys();case 2:t.companys=e.sent,t.initResignChart(),t.initCenterChart(),t.initGenderChart(),t.initEducationChart(),t.initContractChart(),t.initAgeChart(),t.initProvinceChart(),t.initViewData(),t.initManages(),t.loadUnreadCount(),t.loadUnProcessCount();case 14:case"end":return e.stop()}}),e)})))()},methods:{loadUnreadCount:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.vk.callFunction({url:"admin/bpmn/notification/pub/getList",title:"加载中...",data:{status:"unread",userInfo:t.vk.getVuex("$user.userInfo")}});case 3:a=e.sent,0===a.code&&(t.unreadCount=a.data.total||0,t.vk.setVuex("$user.unReadCount",t.unreadCount)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("加载未读通知数量失败:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},loadUnProcessCount:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.vk.callFunction({url:"admin/bpmn/task/sys/getList",title:"加载中...",data:{userInfo:t.vk.getVuex("$user.userInfo")}});case 3:a=e.sent,0===a.code&&(t.unProcessCount=a.rows.length||0,t.vk.setVuex("$user.unProcessCount",t.unProcessCount)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("加载未读通知数量失败:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getCompanys:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vk.callFunction({url:"admin/hrm/employees/pub/getRoleCompanys",title:"请求中...",data:{user:t.vk.getVuex("$user.userInfo")}});case 2:return a=e.sent,e.abrupt("return",a.rows);case 4:case"end":return e.stop()}}),e)})))()},initResignChart:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vk.callFunction({url:"admin/hrm/employees/pub/getResignTotal",title:"请求中...",data:{companys:t.companys}});case 2:a=e.sent,t.overviewData.lzry.value=a.total+"人";case 4:case"end":return e.stop()}}),e)})))()},initViewData:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,r,s,i;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vk.callFunction({url:"admin/hrm/employees/pub/getTotal",title:"请求中...",data:{companys:t.companys}});case 2:a=e.sent,r=a.data.total||0,s=a.data.avg_age||0,i=a.data.avg_tenure||0,t.overviewData.zrs.value=r+"人",t.overviewData.ageAvg.value=s+"岁",t.overviewData.yearAvg.value=i+"年";case 9:case"end":return e.stop()}}),e)})))()},initCenterChart:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,r,s;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$echarts.init(t.$refs.CenterChart),r={tooltip:{trigger:"axis"},xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:{type:"bar",data:[],itemStyle:{color:"#00c0ef"}}},e.next=4,vk.callFunction({url:"admin/hrm/employees/pub/getCenters",title:"请求中...",data:{companys:t.companys}});case 4:s=e.sent,s.rows.map((function(t,e){r.xAxis.data.push(t.centers.center_name),r.series.data.push(t.count)})),a.setOption(r);case 7:case"end":return e.stop()}}),e)})))()},initGenderChart:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,r,s;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$echarts.init(t.$refs.genderChart),r={tooltip:{trigger:"item"},series:{type:"pie",data:[],color:["#f56c6c","#00c0ef"]}},e.next=4,vk.callFunction({url:"admin/hrm/employees/pub/getGenders",title:"请求中...",data:{companys:t.companys}});case 4:s=e.sent,s.rows.map((function(t,e){var a=1==t.gender?"男":"女";r.series.data.push({value:t.count,name:a})})),a.setOption(r);case 7:case"end":return e.stop()}}),e)})))()},initEducationChart:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,r,s;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$echarts.init(t.$refs.educationChart),r={tooltip:{trigger:"axis"},xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:{type:"line",data:[],itemStyle:{color:"#00c0ef"}}},e.next=4,vk.callFunction({url:"admin/hrm/employees/pub/getEducationals",title:"请求中...",data:{companys:t.companys}});case 4:s=e.sent,s.rows.map((function(t,e){r.xAxis.data.push(t.educationals.educational_name),r.series.data.push(t.count)})),a.setOption(r);case 7:case"end":return e.stop()}}),e)})))()},initContractChart:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,r,s;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$echarts.init(t.$refs.contractChart),r={tooltip:{trigger:"item"},series:{type:"pie",data:[],color:["#f39c12","#f56c6c","#00c0ef"]}},e.next=4,vk.callFunction({url:"admin/hrm/employees/pub/getContracts",title:"请求中...",data:{companys:t.companys}});case 4:s=e.sent,s.rows.map((function(t,e){r.series.data.push({value:t.count,name:t.contracts.contract_name})})),a.setOption(r);case 7:case"end":return e.stop()}}),e)})))()},initManages:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,r,s,i,c,o,u;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={yg:{start:11,end:29},jcgl:{start:7,end:10},zcgl:{start:5,end:6},gg:{start:1,end:4}},r=0,s=0,i=0,c=0,e.t0=(0,n.default)().keys(a);case 6:if((e.t1=e.t0()).done){e.next=25;break}return o=e.t1.value,e.next=10,vk.callFunction({url:"admin/hrm/employees/pub/getManages",title:"请求中...",data:{companys:t.companys,key:a[o]}});case 10:if(u=e.sent,!(u.total>0)){e.next=23;break}e.t2=o,e.next="yg"===e.t2?15:"jcgl"===e.t2?17:"zcgl"===e.t2?19:21;break;case 15:return r=u.total,e.abrupt("break",23);case 17:return s=u.total,e.abrupt("break",23);case 19:return i=u.total,e.abrupt("break",23);case 21:return c=u.total,e.abrupt("break",23);case 23:e.next=6;break;case 25:t.overviewData.yg.value=r+"人",t.overviewData.jcgl.value=s+"人",t.overviewData.zcgl.value=i+"人",t.overviewData.gg.value=c+"人";case 29:case"end":return e.stop()}}),e)})))()},initAgeChart:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,r,s,i,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={20:{start:20,end:30},30:{start:30,end:40},40:{start:40,end:50},50:{start:50,end:60}},r=t.$echarts.init(t.$refs.ageChart),s={tooltip:{trigger:"axis"},xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:{type:"line",data:[],itemStyle:{color:"#00c0ef"}}},e.t0=(0,n.default)().keys(a);case 4:if((e.t1=e.t0()).done){e.next=13;break}return i=e.t1.value,e.next=8,vk.callFunction({url:"admin/hrm/employees/pub/getAges",title:"请求中...",data:{key:a[i],companys:t.companys}});case 8:c=e.sent,c.total>0&&(s.xAxis.data.push(a[i].start+"至"+a[i].end),s.series.data.push(c.total)),r.setOption(s),e.next=4;break;case 13:case"end":return e.stop()}}),e)})))()},initProvinceChart:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,r,i;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南"},r=t.$echarts.init(t.$refs.ProvinceChart),i={tooltip:{trigger:"axis"},xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:{type:"bar",data:[],itemStyle:{color:"#00c0ef"}}},Object.keys(a).forEach(function(){var e=(0,s.default)((0,n.default)().mark((function e(s){var c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vk.callFunction({url:"admin/hrm/employees/pub/getProvinces",title:"请求中...",data:{key:s,companys:t.companys}});case 2:c=e.sent,c.total>0&&(i.xAxis.data.push(a[s]),i.series.data.push(c.total)),r.setOption(i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))()}}};e.default=i},7197:function(t,e,a){var r=a("fe76");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=a("967d").default;n("c7bcd542",r,!0,{sourceMap:!1,shadowMode:!1})},"88ff":function(t,e,a){"use strict";var r=a("7197"),n=a.n(r);n.a},b19d:function(t,e,a){"use strict";a.r(e);var r=a("128a"),n=a("5d44");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("88ff");var i=a("828b"),c=Object(i["a"])(n["default"],r["b"],r["c"],!1,null,"1a58af84",null,!1,r["a"],void 0);e["default"]=c.exports},fe76:function(t,e,a){var r=a("c86c");e=r(!1),e.push([t.i,".dashboard-container[data-v-1a58af84]{padding:20px;background-color:#f5f7fa}.card-content[data-v-1a58af84]{text-align:center;padding:20px 0}.card-content i[data-v-1a58af84]{font-size:24px;display:block;margin-bottom:10px}.chart-header[data-v-1a58af84]{font-size:18px;font-weight:700;color:#333}",""]),t.exports=e}}]);