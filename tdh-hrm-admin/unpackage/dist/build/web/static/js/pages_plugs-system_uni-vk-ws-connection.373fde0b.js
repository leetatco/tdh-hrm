(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_plugs-system_uni-vk-ws-connection"],{"40f8":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page-body"},[n("vk-data-table-query",{attrs:{columns:t.queryForm1.columns},on:{search:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}},model:{value:t.queryForm1.formData,callback:function(e){t.$set(t.queryForm1,"formData",e)},expression:"queryForm1.formData"}}),n("vk-data-table",{ref:"table1",attrs:{action:t.table1.action,columns:t.table1.columns,"query-form-param":t.queryForm1,"right-btns":["detail_auto","more"],"right-btns-more":t.table1.rightBtnsMore,"row-no":!0,pagination:!0},on:{delete:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteBtn.apply(void 0,arguments)},"current-change":function(e){arguments[0]=e=t.$handleEvent(e),t.currentChange.apply(void 0,arguments)},"selection-change":function(e){arguments[0]=e=t.$handleEvent(e),t.selectionChange.apply(void 0,arguments)}}})],1)},o=[]},"78a0e":function(t,e,n){"use strict";n.r(e);var i=n("40f8"),o=n("7bba");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);var u=n("828b"),r=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"4e1010e8",null,!1,i["a"],void 0);e["default"]=r.exports},"7bba":function(t,e,n){"use strict";n.r(e);var i=n("f20d"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},f20d:function(t,e,n){"use strict";var i;n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("fd3c"),n("c223");var o=uni.vk,a={},u={data:function(){var t=this;return{loading:!1,data:{},table1:{action:"admin/system_uni/ws-connection/sys/getList",columns:[{key:"appid",title:"DCloud appid",type:"text",width:160},{key:"_id",title:"连接ID（cid）",type:"text",width:300},{key:"userInfo",title:"用户",type:"userInfo",width:160,defaultValue:"-"},{key:"device_id",title:"设备ID",type:"text",width:180},{key:"url",title:"云对象URL",type:"text",width:260},{key:"_add_time",title:"连接时间",type:"time",width:160},{key:"_add_time",title:"距离现在",type:"dateDiff",width:100}],multipleSelection:[],selectItem:"",rightBtnsMore:[{title:"强制断开连接",onClick:function(e){o.callFunction({url:"admin/system_uni/ws-connection/sys/delete",title:"请求中...",data:{cid:e._id},success:function(e){t.refresh()}})}},{title:"强制该设备退出登录",onClick:function(e){o.callFunction({url:"admin/system_uni/ws-connection/sys/forceLogout",title:"请求中...",data:{cid:e._id,url:e.url},success:function(e){t.refresh()}})}},{title:"强制该用户退出登录",disabled:function(t){return!t.user_id},onClick:function(e){o.callFunction({url:"admin/system_uni/ws-connection/sys/forceLogout",title:"请求中...",data:{user_id:e.user_id,url:e.url},success:function(e){t.refresh()}})}}]},queryForm1:{formData:{},columns:[{key:"appid",title:"DCloud appid",type:"select",filterable:!0,clearable:!0,width:220,data:[]},{key:"_id",title:"连接ID",type:"text",width:180,mode:"="},{key:"user_id",type:"text",title:"用户ID",width:160,mode:"="},{key:"device_id",type:"text",title:"设备ID",width:160,mode:"="},{key:"url",type:"text",title:"云对象URL",width:160,mode:"="},{key:"_add_time",type:"datetimerange",title:"连接时间",width:360,mode:"[]"}]}}},onLoad:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=this,o=i.vk,i.options=t,i.init(t)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(t){var e=this;a["form1"]=o.pubfn.copyObject(i.form1),o.callFunction({url:"admin/system/app/sys/getList",data:{},success:function(t){var n=o.pubfn.getListIndex(e.queryForm1.columns,"key","appid"),i=t.rows.map((function(t){return{label:"".concat(t.appid,"（").concat(t.name,"）"),value:t.appid}}));e.queryForm1.columns[n].data=i}})},pageTo:function(t){o.navigateTo(t)},resetForm:function(){o.pubfn.resetForm(a,i)},search:function(t){i.$refs.table1.query(t)},refresh:function(){i.$refs.table1.refresh()},getCurrentRow:function(){return i.$refs.table1.getCurrentRow()},currentChange:function(t){i.table1.selectItem=t},selectionChange:function(t){i.table1.multipleSelection=t},deleteBtn:function(t){var e=t.item,n=t.deleteFn;n({action:"admin/system_uni/ws-connection/sys/delete",data:{_id:e._id}})}},watch:{},computed:{}};e.default=u}}]);